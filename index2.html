<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Corner BBQ ‚Äî –ö–∞—Ç–µ–≥–æ—Ä–∏—è</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />

<style>
:root{
  --gap:16px;
  --soft:#00000014;
  --shadow:0 10px 28px rgba(0,0,0,.16);
  --accent:#ff7a00;
  --radius:20px;
  --home-closed:110px;
  --home-open:150px;
  --popShadow:0 22px 60px rgba(0,0,0,.28);

  /* –º–æ–±–∏–ª–Ω–∏ –¥–∏–Ω–∞–º–∏—á–Ω–∏ –æ—Ñ—Å–µ—Ç–∏ ‚Äì JS –≥–∏ –∑–∞–¥–∞–≤–∞; –∏–º–∞ fallback */
  --mobile-cart-h: 54px;
  --mobile-sidebar-h: 100px;
}

/* Addons —Ä–µ–¥ –¥–æ –±—É—Ç–æ–Ω–∞ + */
/* Addons ‚Äì –ø–æ–¥—Ä–µ–¥–µ–Ω–∏ –µ–¥–Ω–æ –ø–æ–¥ –¥—Ä—É–≥–æ */
.actions-row{
  display:flex;
  align-items:flex-start;          /* + –±—É—Ç–æ–Ω—ä—Ç —Å–µ –ø–æ–¥—Ä–∞–≤–Ω—è–≤–∞ –≥–æ—Ä–µ */
  gap:12px;
  margin:8px 16px 16px auto;
  justify-content:flex-end;
}
.addons{
  display:flex;
  flex-direction:column;           /* ‚üµ –∫–ª—é—á–æ–≤–æ—Ç–æ: –≤–µ—Ä—Ç–∏–∫–∞–ª–Ω–æ */
  gap:6px;
  align-items:flex-start;
  margin-right:auto;
}
.addons label{
  display:flex;
  align-items:center;
  gap:6px;
  font-weight:700;
  font-size:13px;
  user-select:none;                /* –º–∞—Ö–∞–º–µ white-space:nowrap */
}

.addons input{accent-color:#ff7a00}


/* –±–∞–∑–æ–≤–æ */
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:#111;background:#fff}

/* –õ–µ–π–∞—É—Ç */
.app{min-height:100dvh;display:grid;grid-template-columns:260px 1fr}
@media (max-width:1100px){.app{grid-template-columns:220px 1fr}}
@media (max-width:900px){.app{grid-template-columns:1fr}}

/* Sidebar (–¥–µ—Å–∫—Ç–æ–ø –≤–ª—è–≤–æ) */
.sidebar{
  position:sticky;top:0;height:100dvh;background:#fff;border-right:1px solid var(--soft);
  padding:20px 10px 16px 16px;overflow-y:auto;overflow-x:hidden;scrollbar-width:none;
  box-shadow:inset -10px 0 30px rgba(0,0,0,.05)
}
.sidebar::-webkit-scrollbar{display:none}
.sidebar-inner{display:flex;flex-direction:column;gap:14px}
.cat{
  display:block;text-decoration:none;background:#fff;border:1px solid var(--soft);
  border-radius:24px;padding:10px;box-shadow:var(--shadow);cursor:pointer;
  transform-style:preserve-3d; will-change:transform, box-shadow, filter;
  transition:transform .24s cubic-bezier(.22,.8,.36,1), box-shadow .24s ease, filter .24s ease;
  outline-offset:3px;
}
.cat .box{position:relative;height:118px;border-radius:14px;overflow:hidden;background:#e9ecef center/cover no-repeat}
.cat .box::after{
  content:attr(data-label);position:absolute;left:0;right:0;bottom:0;padding:10px 14px;
  font-weight:900;letter-spacing:.6px;color:#fff;text-shadow:0 2px 3px rgba(0,0,0,.6);
  background:linear-gradient(180deg,transparent 0,rgba(0,0,0,.62) 100%)
}
.cat.active{outline:3px solid var(--accent)}

/* Hover pop */
@media (hover:hover){
  .cat:hover{
    transform:perspective(800px) translateY(-6px) scale(1.03) rotateX(1.5deg);
    box-shadow:var(--popShadow);
    filter:saturate(1.03) contrast(1.02);
  }
}

/* Press / Pop */
.cat.is-pressed{ transform:perspective(900px) translateY(-2px) scale(0.985) rotateX(.5deg) }
.cat.is-popping{
  transform:perspective(900px) translateY(-10px) scale(1.06) rotateX(3deg);
  box-shadow:var(--popShadow);
}

/* –õ–æ–≥–∞ –±–µ–∑ zoom */
.cat[data-cat="kola"] .box,
.cat[data-cat="xixo"] .box{
  background-size:contain;background-position:center;background-repeat:no-repeat;background-color:#fff;
}

/* Content + Home */
.content{position:relative;min-width:0;padding:80px 22px 28px}
.home-pill{
  position:absolute;top:16px;left:20px;z-index:10;height:48px;width:var(--home-closed);
  display:flex;align-items:center;justify-content:center;gap:10px;padding:0 12px;
  background:#ff7a00;color:#fff;border-radius:14px;box-shadow:var(--shadow);
  text-decoration:none;overflow:hidden;white-space:nowrap;transition:width .25s ease,padding .25s ease
}
.home-pill .bi{font-size:20px;line-height:1}
.home-pill span{font-weight:700;font-size:18px;letter-spacing:.3px;opacity:0;transform:translateX(8px);transition:opacity .2s ease,transform .2s ease}
.home-pill:hover{width:var(--home-open);justify-content:flex-start;padding:0 16px}
.home-pill:hover span{opacity:1;transform:translateX(0)}

/* CART button (—Ñ–∏–∫—Å–∏—Ä–∞–Ω) */
.cart-btn{
  position:fixed;top:12px;right:12px;z-index:2000;
  display:flex;align-items:center;gap:10px;
  background:#111;color:#fff;border-radius:14px;padding:10px 14px;
  text-decoration:none;box-shadow:var(--shadow);cursor:pointer;user-select:none
}
.cart-btn .bi{font-size:20px}
.cart-count{
  min-width:22px;height:22px;border-radius:999px;background:#ff7a00;color:#fff;
  display:inline-flex;align-items:center;justify-content:center;font-weight:800;font-size:13px;padding:0 6px
}

.h1{font-size:28px;font-weight:900;color:#ff7a00;letter-spacing:.6px;margin:0 0 18px}

/* –ó–∞–≥–ª–∞–≤–∏—è –Ω–∞ —Å–µ–∫—Ü–∏–∏ */
.sec-title{margin:14px 0 10px;font-weight:900;font-size:28px;color:#ff7a00;letter-spacing:.6px}

/* –ü—Ä–æ–¥—É–∫—Ç–æ–≤ –≥—Ä–∏–¥ */
.grid-products{display:grid;grid-template-columns:1fr 1fr;gap:16px}
@media (max-width:900px){.grid-products{grid-template-columns:1fr}}


/* –ö–∞—Ä—Ç–∞ –ø—Ä–æ–¥—É–∫—Ç */
.product{
  background:#fff;border:1px solid var(--soft);border-radius:22px;box-shadow:var(--shadow);
  display:grid;grid-template-columns:360px 1fr;gap:16px;align-items:center;overflow:hidden
}
.product .photo{height:310px;background:#e9ecef center/cover no-repeat;margin:16px;border-radius:14px}
.product .pad{padding:12px 16px;display:flex;flex-direction:column;gap:8px;height:100%}
.product .title{font-weight:900;font-size:20px;margin:0}
.product.even{grid-template-columns:1fr 360px}
.product.even .photo{order:2;margin-left:0;margin-right:16px}
@media (max-width:1200px){.product{grid-template-columns:320px 1fr}.product.even{grid-template-columns:1fr 320px}.product .photo{height:200px}}
@media (max-width:760px){.product,.product.even{grid-template-columns:1fr}.product .photo{height:200px;margin:14px}.product.even .photo{order:0;margin:14px}}

/* –¶–µ–Ω–æ–≤–∏ –±–∞–¥–∂ + Add */
.price-badge{
  display:inline-block;margin-left:auto;margin-right:16px;margin-top:auto;
  background:#ff7a00;color:#fff;border-radius:12px 12px 12px 4px;
  padding:10px 12px 8px;line-height:1;text-align:right;min-width:110px;box-shadow:var(--shadow)
}
.price-badge .lv{font-weight:900;font-size:28px}
.price-badge .eur{font-size:18px;opacity:.95}
.add-btn{
  display:inline-block;margin:8px 16px 16px auto;
  background:#111;color:#fff;border:none;border-radius:10px;padding:8px 14px;
  font-weight:800;cursor:pointer;box-shadow:var(--shadow)
}
.add-btn:active{transform:translateY(1px)}

/* –ì–∞–ª–µ—Ä–∏—è (HELL) */
.gallery{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
@media (max-width:1200px){.gallery{grid-template-columns:repeat(3,1fr)}}
@media (max-width:900px){.gallery{grid-template-columns:repeat(2,1fr)}}
@media (max-width:600px){.gallery{grid-template-columns:1fr}}
.tile{
  background:#fff;border:1px solid var(--soft);border-radius:16px;box-shadow:var(--shadow);
  padding:12px;text-align:center;
}
.tile img{width:100%;height:220px;object-fit:contain;display:block;border-radius:12px}
.caption{margin-top:6px;font-weight:800;font-size:14px;text-align:center}
.tile .price-badge{margin:10px auto 4px;display:block;text-align:center;border-radius:12px}
.tile .add-btn{margin:10px auto 0;display:block}

/* –í–û–î–ê ‚Äî 2 –∫–æ–ª–æ–Ω–∏ */
.water-wrapper{display:flex;flex-direction:column;gap:26px;max-width:720px}
.water-block h2{margin:0 0 8px;font-size:24px;font-weight:900;color:#ff7a00}
.water-grid{display:grid;grid-template-columns:repeat(2, minmax(160px, 1fr));gap:16px;align-items:start}
.water-card{
  background:#fff;border:1px solid var(--soft);border-radius:16px;box-shadow:var(--shadow);
  padding:12px;text-align:center;
}
.water-card img{width:100%;height:220px;object-fit:contain;display:block;border-radius:12px}
.water-name{margin-top:8px;font-weight:800}
.water-card .price-badge{margin:10px auto 4px;display:block;text-align:center;border-radius:12px}
.water-card .add-btn{margin:8px auto 0;display:block}
@media (max-width:520px){.water-grid{grid-template-columns:1fr}}

/* –î–æ—Å—Ç—ä–ø–Ω–æ—Å—Ç */
@media (prefers-reduced-motion: reduce){ .cat{transition:none} }

/* === –ü–ª–∞–≤–∞—â–æ ‚Äû–ù–∞—á–∞–ª–æ‚Äú === */
.home-pill{ will-change: transform; }
.home-pill{ position: fixed !important; top: 16px; left: 20px; z-index: 1500; will-change: transform; }

/* === CART MODAL === */
.cart-overlay{
  position:fixed;inset:0;
  background:rgba(0,0,0,.2);
  backdrop-filter:blur(20px);
  display:none;align-items:flex-start;justify-content:flex-end;z-index:3000;
}
.cart-panel{
  width:min(560px, 100%);max-height:100dvh;overflow:auto;background:#fff;border-left:1px solid var(--soft);
  box-shadow:var(--popShadow);padding:18px 16px 20px;border-radius:16px 0 0 16px;
}
.cart-head{display:flex;align-items:center;gap:12px;margin-bottom:12px}
.cart-head .title{font-size:22px;font-weight:900;color:#ff7a00}
.cart-close{margin-left:auto;background:transparent;border:none;font-size:22px;cursor:pointer}
.cart-items{display:flex;flex-direction:column;gap:12px}
.cart-item{
  display:grid;grid-template-columns:88px 1fr auto;gap:12px;align-items:center;
  background:#fff;border:1px solid var(--soft);border-radius:12px;padding:8px;box-shadow:var(--shadow)
}
.cart-item img{width:88px;height:66px;object-fit:cover;border-radius:10px;background:#e9ecef}
.cart-item .name{font-weight:800}
.cart-item .price{font-weight:900}
.cart-empty{padding:12px;font-weight:700;opacity:.7}
.cart-total{
  margin-top:14px;padding-top:12px;border-top:2px dashed var(--soft);
  display:flex;align-items:center;justify-content:space-between;font-weight:900;font-size:18px
}
.cart-actions{margin-top:12px;display:flex;justify-content:flex-end}
.order-btn{
  background:var(--accent);color:#fff;border:none;border-radius:12px;
  padding:12px 16px;font-weight:900;box-shadow:var(--shadow);cursor:pointer
}
.order-btn:disabled{opacity:.5;cursor:not-allowed}

/* –ï—Ñ–µ–∫—Ç –∑–∞ –¥–≤–æ–π–Ω–æ –∫–ª–∏–∫–≤–∞–Ω–µ –≤—ä—Ä—Ö—É —Å–Ω–∏–º–∫–∞ */
.photo.zoomed {
  position: fixed !important;
  top: 50%;
  left: 50%;
  width: 90vw !important;
  height: 90vh !important;
  background-size: contain !important;
  background-repeat: no-repeat !important;
  background-position: center !important;
  z-index: 9999 !important;
  border-radius: 20px;
  box-shadow: 0 0 60px rgba(0,0,0,0.6);
  transform: translate(-50%, -50%) scale(1);
  transition: all .4s ease-in-out;
}

/* –ø–ª–∞–≤–Ω–æ—Å—Ç –ø—Ä–∏ –≤—Ä—ä—â–∞–Ω–µ */
.photo {
  transition: all .3s ease-in-out;
  cursor: zoom-in;
}
.photo.zoomed { cursor: zoom-out; }


/* =========================
   ‚úÖ MOBILE (‚â§900px) ‚Äì FIXED SIDEBAR + SCROLL HIDE
   ========================= */
@media (max-width:900px){
  .cart-btn{
    top: 8px;
    right: 10px;
    z-index: 2000;
  }
  .sidebar{
    position: fixed;
    top: var(--mobile-cart-h);
    left: 0;
    right: 0;
    width: 100%;
    height: auto;
    border-right: none;
    border-bottom: 1px solid var(--soft);
    padding: 10px 8px 10px 12px;
    overflow-x: auto;
    overflow-y: hidden;
    background: #fff;
    box-shadow: none;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x proximity;
    z-index: 1200;
    transition: transform 0.35s ease, opacity 0.35s ease, filter 0.35s ease;
  }
  .sidebar::-webkit-scrollbar{ height:6px; }
  .sidebar-inner{
    flex-direction: row;
    gap: 10px;
    align-items: stretch;
    min-width: max-content;
  }
  .cat{ min-width:140px; padding:8px; border-radius:16px; scroll-snap-align:start; }
  .cat .box{ height:94px; border-radius:12px; }
  .cat .box::after{ padding:8px 10px; font-size:13px; }

  .sidebar::before, .sidebar::after{
    content:"";
    position: sticky;
    top:0;
    height:100%;
    width:22px;
    z-index:2;
    pointer-events:none;
  }
  .sidebar::before{
    left:0;
    background:linear-gradient(90deg,#fff,rgba(255,255,255,0));
    margin-left:-12px;
  }
  .sidebar::after{
    position: sticky;
    right:0;
    background:linear-gradient(270deg,#fff,rgba(255,255,255,0));
    margin-right:-10px;
  }

  .content{
    padding-top: calc(var(--mobile-cart-h) + var(--mobile-sidebar-h) + 16px);
    padding-left:14px;
    padding-right:14px;
  }

  .home-pill{
    position: fixed !important;
    top: calc(var(--mobile-cart-h) + 12px) !important;
    left: 12px !important;
    z-index: 1500;
  }

  .sidebar.hide-on-scroll { transform: translateY(-100%); opacity: 0; filter: blur(3px); }

  .h1{ font-size:22px; margin:10px 0 12px; }
  .sec-title{ font-size:22px; margin:12px 0 8px; }
  .price-badge .lv{ font-size:24px; }
  .price-badge .eur{ font-size:16px; }
}

/* –ü–†–û–ú–û–¶–ò–ò ‚Äì (—Å—Ç–∞—Ä–∞—Ç–∞ iframe –æ–±–≤–∏–≤–∫–∞ –≤—Å–µ –æ—â–µ –µ –Ω–∞–ª–∏—á–Ω–∞, –Ω–æ –≤–µ—á–µ –Ω–µ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞) */
.embed-wrap{width:100%;min-height:70vh}
.embed-wrap iframe{
  width:100%;
  height:calc(100dvh - 140px);
  border:0;border-radius:16px;background:#fff;box-shadow:var(--shadow);
}



/* === PROMO BUILDER (–º–∏–Ω–∏–º–∞–ª–µ–Ω —Å—Ç–∏–ª) === */
.builder{background:#111;border:1px solid var(--soft);border-radius:14px;padding:12px;color:#fff;margin-top:12px}
.builder-head{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.builder-head .hint{opacity:.8;font-size:12px}
.rows{display:flex;flex-direction:column;gap:10px}
.row{display:grid;grid-template-columns:1fr 44px 1fr 140px 38px;gap:10px;align-items:center}
.drop{border:2px dashed #ffffff2f;border-radius:12px;min-height:72px;padding:8px;display:flex;align-items:center;justify-content:center}
.pluscell{font-weight:900;text-align:center;opacity:.8}
.price-input{width:100%;border:1px solid var(--soft);border-radius:10px;padding:10px}
.row-del{background:#222;color:#fff;border:none;border-radius:10px;padding:10px;cursor:pointer}
.actions{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}
.actions .btn{background:#ff7a00;border:0;color:#fff;font-weight:900;border-radius:10px;padding:10px 14px;cursor:pointer;box-shadow:var(--shadow)}
.chip{display:flex;gap:8px;align-items:center;background:#1a1a1a;border:1px solid #ffffff1a;border-radius:10px;padding:6px 8px;min-width:0}
.chip img{width:42px;height:42px;object-fit:cover;border-radius:8px;background:#e9ecef}
.chip .meta{display:flex;flex-direction:column}
.chip .nm{font-weight:800;font-size:13px}
.chip .ds{font-size:12px;opacity:.8}
.chip .x{margin-left:auto;cursor:pointer;opacity:.9}

/* === –î–µ—Å–µ–Ω slide –∫–∞—Ç–∞–ª–æ–≥ === */
.slide{position:fixed;top:0;right:-420px;width:min(420px,100%);height:100dvh;background:#111;color:#fff;border-left:1px solid var(--soft);box-shadow:var(--popShadow);z-index:3200;transition:right .28s ease}
.slide.open{right:0}
.slide-head{display:flex;align-items:center;gap:8px;padding:10px;border-bottom:1px solid #ffffff14}
.slide .btn{background:#222;border:0;color:#fff;border-radius:10px;padding:8px 10px;cursor:pointer}
.slide-search{width:calc(100% - 20px);margin:10px;border:1px solid var(--soft);border-radius:10px;padding:10px;background:#0e0f10;color:#fff}
.catalog{padding:10px;display:grid;grid-template-columns:1fr;gap:10px;overflow:auto;max-height:calc(100dvh - 108px)}
.s-title{font-weight:900;color:#ff7a00;margin:6px 0}
.s-cat{display:grid;grid-template-columns:72px 1fr;gap:10px;align-items:center;background:#0f0f0f;border:1px solid #ffffff14;border-radius:12px;padding:8px;cursor:pointer}
.s-cat img{width:72px;height:56px;object-fit:cover;border-radius:10px;background:#e9ecef}
.s-card{display:grid;grid-template-columns:66px 1fr auto;gap:8px;align-items:center;background:#0f0f0f;border:1px solid #ffffff14;border-radius:12px;padding:8px}
.s-card img{width:66px;height:52px;object-fit:cover;border-radius:10px;background:#e9ecef}
.s-card .nm{font-weight:800}
.s-card .pr{font-weight:900;opacity:.9}
.s-gallery{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.s-tile{background:#0f0f0f;border:1px solid #ffffff14;border-radius:12px;padding:8px;display:flex;flex-direction:column;align-items:center}
.s-tile img{width:100%;height:140px;object-fit:contain;background:#e9ecef;border-radius:10px}
.s-price{font-weight:900;margin-top:6px}
.s-cap{font-weight:700;opacity:.9}
.s-water{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.s-wcard{background:#0f0f0f;border:1px solid #ffffff14;border-radius:12px;padding:8px;text-align:center}
.s-wcard img{width:100%;height:140px;object-fit:contain;background:#e9ecef;border-radius:10px}
.s-wname{font-weight:800;margin-top:6px}
.s-wprice{font-weight:900;opacity:.9}
@media (max-width:520px){
  .row{grid-template-columns:1fr 30px 1fr 120px 38px}
  .catalog{grid-template-columns:1fr}
  .s-gallery,.s-water{grid-template-columns:1fr}
}



/* === PROMO (–í–ì–†–ê–î–ï–ù–û –í index2) ‚Äî —Å—Ç–∏–ª–æ–≤–µ === */
.promo-wrap{background:#0e0f10;border-radius:16px;box-shadow:var(--shadow);padding:16px;color:#fff}
.promo-head{display:flex;align-items:center;gap:10px;margin:0 0 12px;font-weight:900;color:#ff7a00}
.promo-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.promo-card{position:relative;background:#111;border:1px solid var(--soft);border-radius:16px;overflow:hidden}
.promo-sides{display:grid;grid-template-columns:1fr 1fr}
.promo-img{height:220px;background:#e9ecef center/cover no-repeat}
.promo-name{padding:8px 12px;font-weight:900}
.promo-price{position:absolute;right:10px;top:10px;background:#ff7a00;color:#fff;border-radius:12px;padding:8px 10px;font-weight:900}
.promo-del{position:absolute;left:10px;top:10px;border:0;background:#000a;color:#fff;border-radius:10px;padding:6px 10px;font-weight:900;cursor:pointer;}
.promo-card .promo-img, .promo-card .promo-name, .promo-price{z-index:1}
.promo-del{z-index:9999}
.promo-create{margin-top:16px;border:1px dashed #ffffff2a;border-radius:14px;padding:12px}
.promo-create h3{margin:0 0 8px;font-size:18px;color:#ff7a00}
.promo-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.promo-field{display:flex;flex-direction:column;gap:6px}
.promo-field input{border:1px solid var(--soft);border-radius:10px;padding:10px}
.promo-actions{margin-top:10px;display:flex;gap:10px;justify-content:flex-end}
.promo-btn{background:#ff7a00;border:0;color:#fff;font-weight:900;border-radius:10px;padding:10px 14px;cursor:pointer;box-shadow:var(--shadow)}
.promo-btn:disabled{opacity:.5;cursor:not-allowed}
@media (max-width:900px){
  .promo-grid{grid-template-columns:1fr}
  .promo-sides .promo-img{height:180px}
}

/* üëâ –¥–æ–±–∞–≤–∏ —Ç–æ–≤–∞ –Ω—è–∫—ä–¥–µ —Å–ª–µ–¥ .title –∏–ª–∏ –≤ –∫—Ä–∞—è –Ω–∞ style –±–ª–æ–∫–∞ */
.desc{
  margin:4px 0 0;
  font-size:14px;
  line-height:1.35;
  opacity:.9;
}


/* ‚úÖ –î–∞ –Ω–µ —Å–µ —Å–≥—ä—á–∫–≤–∞—Ç —Å–æ—Å–æ–≤–µ—Ç–µ –≤–¥—è—Å–Ω–æ */
.actions-row{
  flex-wrap: wrap;                 /* –ø–æ–∑–≤–æ–ª—è–≤–∞ –ø—Ä–µ–Ω–∞—Å—è–Ω–µ */
  justify-content: flex-start;     /* —Å—Ç–∞—Ä—Ç–æ–≤–æ –ø–æ–¥—Ä–∞–≤–Ω—è–≤–∞–Ω–µ */
  gap: 10px 14px;
  margin: 8px 16px 16px 0;         /* –±–µ–∑ auto –æ—Ç–¥—è—Å–Ω–æ */
  width: 100%;                     /* —Ä–µ–¥—ä—Ç –¥–∞ –∑–∞–µ–º–∞ —à–∏—Ä–∏–Ω–∞—Ç–∞ */
}

/* –±–ª–æ–∫—ä—Ç —Å—ä—Å —Å–æ—Å–æ–≤–µ—Ç–µ –¥–∞ –∏–º–∞ –Ω–æ—Ä–º–∞–ª–Ω–∞ —à–∏—Ä–∏–Ω–∞ –∏ –¥–∞ —Ä–∞—Å—Ç–µ */
.actions-row .addons{
  min-width: 240px;                /* –∫–ª—é—á–æ–≤–æ: –Ω–µ–∫–∞ –µ ‚Äû—á–µ—Ç–∏–º–æ‚Äú */
  max-width: 520px;
  flex: 1 1 auto;                  /* –º–æ–∂–µ –¥–∞ —Ä–∞—Å—Ç–µ/—Å–≤–∏–≤–∞ */
  margin-right: 0;                 /* –º–∞—Ö–∞–º–µ auto, –ø—Ä–µ—á–µ—à–µ */
}

/* –±—É—Ç–æ–Ω—ä—Ç –≤–∏–Ω–∞–≥–∏ –≤–¥—è—Å–Ω–æ –∏ –Ω–∞ –ª–∏–Ω–∏—è—Ç–∞ –Ω–∞ –∑–∞–≥–ª–∞–≤–∏–µ—Ç–æ */
.actions-row .add-btn{
  margin-left: auto;               /* –∏–∑–±—É—Ç–≤–∞ —Å–µ –≤–¥—è—Å–Ω–æ */
  align-self: flex-start;          /* –∏–∑—Ä–∞–≤–Ω–µ–Ω –≥–æ—Ä–µ */
}

/* –∫—É—Ç–∏—è—Ç–∞ ‚Äû–ø–æ–¥ —Å–Ω–∏–º–∫–∞—Ç–∞‚Äú ‚Äî –¥–∞ —Å—Ç–æ–∏ –∫—Ä–∞—Å–∏–≤–æ */
.addons-underimg{
  width: 100%;
  margin: 8px 16px 10px 16px;
}

/* –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –¥—Ä–µ–±–Ω–∏ –ø–æ–¥–æ–±—Ä–µ–Ω–∏—è –∑–∞ —Ç–µ—Å–Ω–∏ –µ–∫—Ä–∞–Ω–∏/–∫–∞—Ä—Ç–∏ */
@media (max-width: 1350px){
  .actions-row .addons{ min-width: 220px; }
}
@media (max-width: 1200px){
  .actions-row{ gap: 8px 12px; }
}
@media (max-width: 900px){
  /* –Ω–∞ –º–æ–±–∏–ª–µ–Ω: –∞–∫–æ –Ω—è–º–∞ –º—è—Å—Ç–æ, —Ä–µ–¥–∏ ‚Äû–°–æ—Å–æ–≤–µ‚Äú –Ω–∞–¥ –±—É—Ç–æ–Ω–∞ */
  .actions-row{ flex-wrap: wrap; }
  .actions-row .add-btn{ margin-left: 0; }
}

.product .pad {
  padding-left: 6px !important;   /* –º–µ–∂–¥—É 4 –∏ 8 –µ –Ω–∞–π-–¥–æ–±—Ä–µ */
  margin-left: -8px;              /* –∞–∫–æ –∫–∞—Ä—Ç–∏—Ç–µ –∏–∑–≥–ª–µ–∂–¥–∞—Ç —Ç–≤—ä—Ä–¥–µ –≤–¥—è—Å–Ω–æ */
}

.price-badge {
  margin-left: 2px;               /* —Ü–µ–Ω–∞—Ç–∞ –¥–∞ —Å–ª–µ–¥–≤–∞ —Ç–µ–∫—Å—Ç–∞ */
}

/* —Ñ–∏–Ω–∞–ª–Ω–æ –∏–∑—Ä–∞–≤–Ω—è–≤–∞–Ω–µ –Ω–∞ —Ç–µ–∫—Å—Ç–∞ –∏ —Ü–µ–Ω–∞—Ç–∞ */
.product .pad {
  padding-left: 0 !important;
  margin-left: -14px;         /* –∏–∑—Ä–∞–≤–Ω—è–≤–∞ —Ç–µ–∫—Å—Ç–∞ –∏ —Ü–µ–Ω–∞—Ç–∞ —Å –ª—è–≤–∞—Ç–∞ —Å–Ω–∏–º–∫–∞ */
}

.price-badge {
  margin-left: -6px;          /* –∏–∑—Ç–µ–≥–ª—è —Ü–µ–Ω–∞—Ç–∞ –ª–µ–∫–æ –Ω–∞–ª—è–≤–æ */
  transform: translateY(-5px);/* —Ñ–∏–Ω–æ –Ω–∞–≥–æ—Ä–µ –∑–∞ –≤–∏–∑—É–∞–ª–Ω–∞ –æ—Å */
}

/* –ì–ª–∞–≤–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞ –≤—Å–µ–∫–∏ –ø—Ä–æ–¥—É–∫—Ç */
.product {
  display: flex;
  align-items: stretch;
  background: #fff;
  border-radius: 20px;
  box-shadow: var(--shadow);
  overflow: hidden;
  margin-bottom: 24px;
}

/* –°–Ω–∏–º–∫–∞—Ç–∞ –≤–∏–Ω–∞–≥–∏ –≤–ª—è–≤–æ, —Å –µ–¥–Ω–∞–∫–≤–∏ —Ä–∞–∑–º–µ—Ä–∏ */
.product .photo {
  width: 280px;
  height: 200px;
  border-radius: 18px;
  background-size: cover;
  background-position: center;
  flex-shrink: 0;
}

/* –¢–µ–∫—Å—Ç–æ–≤–∏—è—Ç –±–ª–æ–∫ –≤–¥—è—Å–Ω–æ ‚Äî –ø–æ–¥—Ä–∞–≤–Ω–µ–Ω –ø–æ —Å–Ω–∏–º–∫–∞—Ç–∞ */
.product .pad {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 12px 16px;
  margin-left: -6px;          /* –ª–µ–∫–æ –Ω–∞–ª—è–≤–æ –∑–∞ –ø–µ—Ä—Ñ–µ–∫—Ç–Ω–∞ –æ—Å */
  width: 100%;
}

/* –ó–∞–≥–ª–∞–≤–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ */
.product .title {
  font-weight: 900;
  font-size: 18px;
  margin-bottom: 6px;
}
.product .desc {
  font-size: 14px;
  opacity: 0.85;
  margin-bottom: 10px;
}

/* –¶–µ–Ω–∞—Ç–∞ */
.price-badge {
  align-self: flex-start;
  margin-top: auto;
  background: var(--accent);
  color: #fff;
  border-radius: 12px;
  padding: 10px 14px;
  font-weight: 900;
  font-size: 20px;
  box-shadow: var(--popShadow);
  margin-left: 0;
  transform: translateY(-2px);
}
.price-badge .eur {
  font-size: 13px;
  font-weight: 600;
  opacity: 0.85;
}

/* –ë—É—Ç–æ–Ω—ä—Ç "+" */
.add-btn {
  background: #000;
  color: #fff;
  border: none;
  border-radius: 12px;
  padding: 8px 12px;
  font-size: 22px;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  transition: 0.2s;
}
.add-btn:hover {
  background: var(--accent);
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞ ‚Äû—Å –∫–∞–∫–≤–æ –¥–∞ –±—ä–¥–µ‚Äú –∏ ‚Äû—Å–æ—Å–æ–≤–µ‚Äú */
.actions-row {
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-start;
  align-items: flex-start;
  gap: 10px 14px;
  width: 100%;
  margin-top: 8px;
}
.actions-row .addons {
  flex: 1 1 auto;
  min-width: 220px;
}
.actions-row .hdr {
  font-weight: 700;
  margin-bottom: 6px;
}
.actions-row label {
  display: block;
  font-size: 14px;
  cursor: pointer;
  margin-bottom: 3px;
}

.btn-all{
  display:inline-block; margin-left:8px; padding:2px 8px;
  font-weight:800; font-size:12px; border:1px solid var(--soft);
  border-radius:8px; background:#f6f6f6; cursor:pointer;
}
.btn-all:hover{ background:#fff; box-shadow:var(--shadow); }

/* ===== –ú–û–ë–ò–õ–ï–ù –§–ò–ö–° (‚â§900px) ‚Äî —Å–∞–º–æ –∑–∞ –∫–∞—Ä—Ç–∏—Ç–µ —Å –ø—Ä–æ–¥—É–∫—Ç–∏ (.product) =====
   ‚õî –ù–µ –∑–∞—Å—è–≥–∞ —Å–µ–∫—Ü–∏–∏—Ç–µ ‚Äû–í–æ–¥–∞‚Äú/‚Äû–ì–∞–∑–∏—Ä–∞–Ω–∞ –≤–æ–¥–∞‚Äú. */
@media (max-width: 900px){

  /* –µ–¥–Ω–∞ –∫–æ–ª–æ–Ω–∞ –∑–∞ –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ */
  .grid-products{ grid-template-columns: 1fr !important; gap: 16px !important; }

  /* –∫–∞—Ä—Ç–∞—Ç–∞ —Å—Ç–∞–≤–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª–Ω–∞ */
  .product,
  .product.even{
    display: block !important;
    margin-bottom: 16px !important;
    border-radius: 16px !important;
    overflow: hidden !important;
  }

  /* —Å–Ω–∏–º–∫–∞—Ç–∞ ‚Äì –ø—ä–ª–Ω–∞ —à–∏—Ä–∏–Ω–∞ */
  .product .photo{
    width: 100% !important;
    height: 220px !important;
    margin: 0 !important;
    border-radius: 0 !important;
    background-size: cover !important;
    background-position: center !important;
  }

  /* –ª—è–≤–∞—Ç–∞ –∫–æ–ª–æ–Ω–∞ –ø–æ–¥ —Å–Ω–∏–º–∫–∞—Ç–∞ */
  .leftcol{
    width: 100% !important;
    display: block !important;
  }

  /* —Ç–µ–∫—Å—Ç–∞ ‚Äì –±–µ–∑ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª–Ω–∏ –º–∞—Ä–∂–æ–≤–µ */
  .product .pad{
    display: block !important;
    padding: 12px 14px !important;
    margin-left: 0 !important;      /* –æ—Ç–º–µ–Ω—è desktop -14px */
  }

  .product .title{
    font-size: 18px !important;
    margin-bottom: 6px !important;
  }
  .product .desc{
    font-size: 14px !important;
    line-height: 1.4 !important;
    margin-bottom: 8px !important;
  }

  /* —Ü–µ–Ω–æ–≤–∏—è—Ç –±–∞–¥–∂ */
  .product .price-badge{
    margin: 6px 0 0 0 !important;
    transform: none !important;
    border-radius: 10px !important;
  }

  /* ‚Äû—Å –∫–∞–∫–≤–æ –¥–∞ –±—ä–¥–µ‚Äú –ø–æ–¥ —Å–Ω–∏–º–∫–∞—Ç–∞ */
  .addons-underimg{
    width: 100% !important;
    margin: 10px 14px 0 14px !important;
  }

  /* —Ä–µ–¥—ä—Ç —Å—ä—Å —Å–æ—Å–æ–≤–µ/–±—É—Ç–æ–Ω */
  .actions-row{
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 10px 12px !important;
    justify-content: flex-start !important;
    width: 100% !important;
    margin-top: 10px !important;
  }
  .actions-row .addons{
    flex: 1 1 100% !important;
    min-width: 0 !important;
  }
  .actions-row .add-btn{
    order: 2;
    flex: 1 1 100% !important;
    max-width: none !important;
    margin-left: 0 !important;
    border-radius: 12px !important;
    padding: 10px 12px !important;
    font-size: 16px !important;
    text-align: center !important;
    background: var(--accent) !important;
  }
}


/* ==== MOBILE (‚â§900px) ‚Äì –∫–æ–º–ø–∞–∫—Ç–Ω–∞ –ø–æ–¥—Ä–µ–¥–±–∞ 1 –ø–æ–¥ –¥—Ä—É–≥–æ ==== */
.mobile-title,
.mobile-veg,
.mobile-sauces,
.mobile-addons,
.mobile-add-btn { display: none; }

@media (max-width: 900px){
  /* —Å–Ω–∏–º–∫–∞—Ç–∞ ‚Äì –ø—ä–ª–Ω–∞ —à–∏—Ä–∏–Ω–∞ */
  .product, .product.even{ display:block !important; overflow:hidden !important; }
  .product .photo{
    width:100% !important; height:220px !important;
    margin:0 !important; border-radius:0 !important;
    background-size:cover !important; background-position:center !important;
  }

  /* –∑–∞–≥–ª–∞–≤–∏–µ: –∫—Ä–∏–µ–º –¥–µ—Å–∫—Ç–æ–ø—Å–∫–æ—Ç–æ, –ø–æ–∫–∞–∑–≤–∞–º–µ –º–æ–±–∏–ª–Ω–æ—Ç–æ –ü–û–î —Å–Ω–∏–º–∫–∞—Ç–∞ */
  .product .pad .title{ display:none !important; }
  .mobile-title{
    display:block !important;
    margin:8px 14px 2px 14px;           /* –∫—ä—Å –∏–Ω—Ç–µ—Ä–≤–∞–ª */
    font-weight:900; font-size:18px;
  }

  /* .pad –±–µ–∑ ‚Äû–≤—ä–∑–¥—É—à–Ω–∏‚Äú —Ä–∞–∑—Å—Ç–æ—è–Ω–∏—è */
  .product .pad{
    display:flex !important; flex-direction:column !important;
    padding:10px 14px !important; margin-left:0 !important; gap:0 !important;
  }

  /* –æ–ø–∏—Å–∞–Ω–∏–µ ‚Äì –º–Ω–æ–≥–æ —Å—Ç–µ–≥–Ω–∞—Ç–æ */
  .product .pad .desc{
    margin:4px 0 4px 0 !important; line-height:1.28 !important;
  }

  /* —Å–∫—Ä–∏–≤–∞–º–µ –¥–µ—Å–∫—Ç–æ–ø—Å–∫–∏—Ç–µ –¥–æ–±–∞–≤–∫–∏/—Å–æ—Å–æ–≤–µ –∏ —Ä–µ–¥–∞ —Å –±—É—Ç–æ–Ω–∞ */
  .addons-underimg{ display:none !important; }
  .actions-row{ display:none !important; }

  /* –º–æ–±–∏–ª–Ω–∏—Ç–µ –¥–≤–æ–π–Ω–∏—Ü–∏ ‚Äì –ø–æ 1 —Ä–µ–¥ –º—è—Å—Ç–æ –º–µ–∂–¥—É —Å–µ–∫—Ü–∏–∏—Ç–µ */
  .mobile-veg,
  .mobile-sauces,
  .mobile-addons{
    display:block !important; width:100% !important;
    margin:6px 0 0 0 !important;
  }
  .mobile-veg .hdr,
  .mobile-sauces .hdr,
  .mobile-addons .hdr{ font-weight:700; margin:0 0 4px 0; }

  /* —á–µ–∫–±–æ–∫—Å–æ–≤–µ—Ç–µ ‚Äì –ø–ª—ä—Ç–Ω–∏ */
  .mobile-veg label,
  .mobile-sauces label,
  .mobile-addons label{ display:block; margin:2px 0; }

  /* —Ü–µ–Ω–∞ + –±—É—Ç–æ–Ω –Ω–∞–π-–¥–æ–ª—É */
  .product .pad .price-badge{
    order:4; align-self:flex-start;
    margin:8px 0 0 0 !important; border-radius:10px !important; transform:none !important;
  }
  .product .pad .mobile-add-btn{
    order:5; display:block !important; width:100% !important;
    margin:10px 0 0 0; text-align:center;
    border-radius:12px; padding:10px 12px; font-size:16px; font-weight:900;
    background:#000 !important; color:#fff !important; box-shadow:var(--shadow);
  }

  /* –æ–∫–æ–Ω—á–∞—Ç–µ–ª–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–æ—Å—Ç */
  .product .pad .desc{ order:1; }
  .product .pad .mobile-veg{ order:2; }
  .product .pad .mobile-sauces{ order:3; }
  .product .pad .price-badge{ order:4; }
  .product .pad .mobile-add-btn{ order:5; }
}

/* === FINAL MOBILE SAFEGUARD (‚â§900px) ‚Äî —É–¥—ä–ª–∂–∞–≤–∞ –≤—Å–∏—á–∫–∏ .product –∏ –ø–∞–∑–∏ "+" –≤–∏–¥–∏–º === */
@media (max-width:900px){
  .product {
    min-height: 1100px !important;  /* üî• –Ω–∞–ø—Ä–∞–≤–∏ –≥–∏ —Å—É–ø–µ—Ä –¥—ä–ª–≥–∏ */
    position: relative !important;
    overflow: visible !important;
  }

  .product .pad {
    padding-bottom: 160px !important; /* ‚Üë –æ—â–µ –ø–æ–≤–µ—á–µ –º—è—Å—Ç–æ –ø–æ–¥ –¥–æ–±–∞–≤–∫–∏—Ç–µ */
  }

  .actions-row {
    position: absolute !important;
    bottom: 20px !important;
    right: 20px !important;
  }
}

@media (max-width:900px){
  /* –°–∞–º–æ –∑–∞ –°–ê–ù–î–í–ò–ß–ò –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω */
  #sandvichi .price,
  #sandvichi .actions-row {
    display: inline-flex !important;
    align-items: center !important;
    vertical-align: middle !important;
  }

  #sandvichi .price {
    font-weight: 900;
    color: var(--accent);
    font-size: 18px;
    margin-right: 10px;
  }

  #sandvichi .actions-row {
    position: static !important;
    justify-content: flex-end !important;
    margin-top: 0 !important;
  }

  #sandvichi .actions-row .add {
    width: 42px;
    height: 42px;
    border-radius: 10px;
    background: var(--accent);
    color: #fff;
    font-size: 22px;
    font-weight: 900;
    border: none;
  }
}

/* ‚úÖ –ú–æ–±–∏–ª–µ–Ω —Ñ–∏–∫c: —Ü–µ–Ω–∞ + "+" –Ω–∞ –µ–¥–∏–Ω —Ä–µ–¥ –∑–∞ –≤—Å–∏—á–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ */
@media (max-width:900px){
  .product .pad{
    display:flex !important;
    flex-wrap:wrap !important;
    align-items:center !important;
    gap:8px !important;
  }

  /* —Ü–µ–Ω–∞—Ç–∞ */
  .product .pad .price-badge{
    order:40 !important;
    display:inline-flex !important;
    margin:8px 6px 0 0 !important;
  }

  /* –º–æ–±–∏–ª–Ω–∏—è—Ç –±—É—Ç–æ–Ω (—Ç–æ–π –≤–µ—á–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ –≤ HTML) */
  .product .pad .mobile-add-btn{
    order:41 !important;
    display:inline-flex !important;
    width:auto !important;
    margin:8px 0 0 0 !important;
    align-self:center !important;
    font-size:18px !important;
    padding:10px 14px !important;
    border-radius:12px !important;
    background:var(--accent) !important;
    color:#fff !important;
  }

  /* —Å–∫—Ä–∏–π —Ä–µ–¥–∞ —Å—ä—Å —Å–æ—Å–æ–≤–µ—Ç–µ, –∑–∞ –¥–∞ –Ω–µ –¥—É–±–ª–∏—Ä–∞–º–µ –±—É—Ç–æ–Ω–∞ */
  .product .pad .actions-row{
    display:none !important;
  }
}

@media (max-width:900px){
  .price-plus{
    display:flex !important;
    align-items:center !important;
    gap:10px !important;
    margin-top:6px !important;
  }
  .price-plus .price-badge{ margin:0 !important; }
  .price-plus .mobile-add-btn,
  .price-plus .add-btn{ display:inline-flex !important; margin:0 !important; }
}


</style>
</head>
<body>

<div class="app">
  <aside class="sidebar"><div class="sidebar-inner" id="sidebar"></div></aside>

  <main class="content">
    <!-- HOME -->
    <a class="home-pill" href="index.html" title="–ù–∞—á–∞–ª–æ">
      <i class="bi bi-house"></i><span>–ù–∞—á–∞–ª–æ</span>
    </a>

    <!-- CART BTN (–Ω–∞–¥ –≤—Å–∏—á–∫–æ) -->
    <button class="cart-btn" id="cartBtn" title="–ö–æ–ª–∏—á–∫–∞">
      <i class="bi bi-cart3"></i>
      <span>–ö–æ–ª–∏—á–∫–∞</span>
      <span class="cart-count" id="cartCount">0</span>
    </button>

    <h1 class="h1" id="catTitle">–°–ê–ù–î–í–ò–ß–ò</h1>
    <div id="productGrid"></div>
  </main>
</div>

<!-- CART MODAL -->
<div class="cart-overlay" id="cartOverlay" aria-hidden="true">
  <div class="cart-panel" role="dialog" aria-modal="true">
    <div class="cart-head">
      <div class="title"><i class="bi bi-cart3"></i> –¢–≤–æ—è—Ç–∞ –∫–æ–ª–∏—á–∫–∞</div>
      <button class="cart-close" id="cartClose" aria-label="–ó–∞—Ç–≤–æ—Ä–∏"><i class="bi bi-x-lg"></i></button>
    </div>
    <div class="cart-items" id="cartItems"></div>

    <!-- üî∂ –ó–∞–±–µ–ª–µ–∂–∫–∞ –∫—ä–º –ø–æ—Ä—ä—á–∫–∞—Ç–∞ -->
    <div id="noteWrapper" style="display:none; margin-top:14px;">
      <label for="orderNote" style="font-weight:900; color:#ff7a00; display:block; margin-bottom:6px;">
        –ó–∞–±–µ–ª–µ–∂–∫–∞ –∫—ä–º –ø–æ—Ä—ä—á–∫–∞—Ç–∞:
      </label>
      <textarea id="orderNote" rows="3" placeholder="–î–æ–±–∞–≤–µ—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –∏–∑–∏—Å–∫–≤–∞–Ω–∏—è –∏–ª–∏ –±–µ–ª–µ–∂–∫–∞..."
        style="width:100%; border:1px solid #ccc; border-radius:10px; padding:10px; font-family:inherit; resize:vertical;"></textarea>
    </div>

    <div class="cart-total" id="cartTotalRow" style="display:none">
      <span>–û–±—â–æ:</span>
      <span id="cartTotal"></span>
    </div>
    <div class="cart-actions">
      <button id="orderNow" class="order-btn" disabled>–ü–æ—Ä—ä—á–∞–π —Å–µ–≥–∞</button>
    </div>
  </div>
</div>

<script>
/* üî∂ –ü—Ä–æ–º–æ—Ü–∏–∏: –ª–æ–≥–æ –∏ –ª–∏–Ω–∫–æ–≤–µ (—Å–∞–º–æ –∑–∞ –º–∏–Ω–∏–∞—Ç—é—Ä–∞—Ç–∞ –≤ —Å–∞–π–¥–±–∞—Ä–∞) */
const PROMO_IMG = (location.protocol === 'file:')
  ? 'file:///E:/BBQ_SITE/promociqlogo.jpg'
  : '/promociqlogo.jpg';
const PROMO_LINK_LOCAL = 'file:///E:/BBQ_SITE/index7.html';
const PROMO_LINK_WEB   = 'index7.html';


/* ‚ûú –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω –º–µ—Å—Ç–∏ –±—É—Ç–æ–Ω–∞ —Ç–æ—á–Ω–æ –≤–¥—è—Å–Ω–æ –æ—Ç —Ü–µ–Ω–∞—Ç–∞ */
function ensureMobilePlusRight(){
  const isPhone = window.matchMedia('(max-width:900px)').matches;
  if (!isPhone) return;

  document.querySelectorAll('.product .pad').forEach(pad => {
    const price = pad.querySelector('.price-badge');
    const btn   = pad.querySelector('.mobile-add-btn') || pad.querySelector('.add-btn');
    if (!price || !btn) return;

    let row = pad.querySelector('.price-plus');
    if (!row){
      row = document.createElement('div');
      row.className = 'price-plus';
      price.replaceWith(row);
      row.appendChild(price);
    }
    row.appendChild(btn);
    btn.style.display = 'inline-flex';
    btn.style.width   = 'auto';
    btn.style.margin  = '0';
  });
}
window.addEventListener('load',  ensureMobilePlusRight);
window.addEventListener('resize', ensureMobilePlusRight);


/* (–°–¢–ê–†–û) –≤–≥—Ä–∞–¥–µ–Ω iframe ‚Äì –æ—Å—Ç–∞–≤–∞ –Ω–µ–∏–∑–ø–æ–ª–∑–≤–∞–Ω–æ, –Ω–æ –Ω–µ –ø—Ä–µ—á–∏ */
function renderPromotionsEmbed(){
  titleEl.textContent = '–ü–†–û–ú–û–¶–ò–ò';
  const base = (location.protocol === 'file:') ? PROMO_LINK_LOCAL : PROMO_LINK_WEB;
  const urlFlag = /\badmin=1\b/.test(location.search + location.hash);
  const lsFlag  = !!(localStorage.getItem('adminName') || '').trim()
               || localStorage.getItem('isAdmin') === '1';
  const isAdmin = urlFlag || lsFlag;
  const src     = isAdmin ? (base + (base.includes('?') ? '&' : '?') + 'admin=1') : base;

  grid.innerHTML = `
    <div class="embed-wrap">
      <iframe id="promoFrame" src="${src}" title="–ü—Ä–æ–º–æ—Ü–∏–∏" loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>`;
  recalcMobileOffsets();

  const f = document.getElementById('promoFrame');
  f?.addEventListener('load', () => {
    if (isAdmin) {
      try { f.contentWindow.postMessage({ type:'bbq-admin', enabled:true }, '*'); } catch(_) {}
    }
  });
}

/* –ú–∏–Ω–∏–∞—Ç—é—Ä–∏ (—Å–∞–π–¥–±–∞—Ä) */
const CAT_THUMBS = {
  promocii: PROMO_IMG,
  burgeri:'snimki/produkti/1menu/burger.jpg',
  palachinki:'snimki/produkti/1menu/palachinki.jpg',
  strandzhanki:'snimki/produkti/1menu/strandjanka.jpg',
  kartofi:'snimki/produkti/1menu/kartofi.jpg',
  salati:'snimki/produkti/1menu/salata.jpg',
  portsii:'snimki/produkti/1menu/porciq.jpg',
  sosove:'snimki/produkti/1menu/sosove.jpg',
  dobavki:'snimki/produkti/1menu/dobavki.jpg',
  deserti:'snimki/produkti/1menu/desert.jpg',
  bezalkoholni:'snimki/produkti/1menu/bezalkoholno.jpg',
  bira:'snimki/produkti/1menu/bira.jpg',
  hell:'snimki/produkti/1menu/hell.jpg',
  voda:'snimki/produkti/–í–û–î–ê/voda_snimka.jpg',
  gazirana_voda:'snimki/produkti/–ì–ê–ó–ò–†–ê–ù–ê_–í–û–î–ê/gaziranavoda_snimka.jpg',
  fanta:'snimki/produkti/–§–ê–ù–¢–ê/fanta_logo.jpg',
  studen_chai:'snimki/produkti/–°–¢–£–î–ï–ù_–ß–ê–ô/studen_chai_logo.jpg',
  kola:'snimki/produkti/–ö–û–õ–ê/kola_logo.jpg',
  sok:'snimki/produkti/–°–û–ö/cappy_logo.jpg',
  airqn:'snimki/produkti/–ê–ô–†–ê–ù/vereq_logo.jpg',
  xixo:'snimki/produkti/–•–ò–•–û/xixo_logo.jpg'
};

/* –¶–µ–Ω–∏ ‚Äì –∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä */
const BGN_PER_EUR = 1.95583;
const fmtLv  = v => (Number(v)||0).toFixed(2).replace('.',',') + ' –ª–≤.';
const fmtEur = v => ((Number(v)||0) / BGN_PER_EUR).toFixed(2).replace('.',',') + ' ‚Ç¨';

/* –ö–æ–ª–∏—á–∫–∞ */
const CART = [];
const cartBtn   = document.getElementById('cartBtn');
const cartCount = document.getElementById('cartCount');
const cartOverlay = document.getElementById('cartOverlay');
const cartItemsEl = document.getElementById('cartItems');
const cartTotalRow = document.getElementById('cartTotalRow');
const cartTotal = document.getElementById('cartTotal');
const orderNowBtn = document.getElementById('orderNow');

/* === –î–û–ë–ê–í–ö–ò (—É–Ω–∏–≤–µ—Ä—Å–∞–ª–Ω–∏) === */
const ADDONS = {
  // –∑–∞ –ü–û–†–¶–ò–ò
  pitka:   { code:'pitka',   label:'–ü–∏—Ç–∫–∞',          price:1.50 },
  raz:     { code:'raz',     label:'–†–∞–∑—è–¥–∫–∞ 100 –≥—Ä', price:1.50 },

  // –∑–∞ –°–ê–ù–î–í–ò–ß–ò (–≤—Å–∏—á–∫–∏ 0 –ª–≤)
  ketchup: { code:'ketchup', label:'–ö–µ—Ç—á—É–ø',      price:0 },
  mayo:    { code:'mayo',    label:'–ú–∞–π–æ–Ω–µ–∑–∞',    price:0 },
  mustard: { code:'mustard', label:'–ì–æ—Ä—á–∏—Ü–∞',     price:0 },
  chili:   { code:'chili',   label:'–õ—é—Ç–æ',        price:0 },
  sharena: { code:'sharena', label:'–®–∞—Ä–µ–Ω–∞ —Å–æ–ª',  price:0 },
};


/* ====== LS –∫–ª—é—á–æ–≤–µ (index2 -> index3) ====== */
const LS_CART_ITEMS = 'bbq_cart_items';
const LS_CART_TOTAL = 'bbq_cart_total';
const LS_ORDER_NOTE = 'bbq_order_note';
const noteWrapper = document.getElementById('noteWrapper');
const orderNoteEl = document.getElementById('orderNote');

/* –î–æ–±–∞–≤—è–Ω–µ –∫—ä–º –∫–æ–ª–∏—á–∫–∞—Ç–∞ */
function addToCart(item){
  CART.push(item);
  updateCartUI();
}

/* –û—Å–Ω–æ–≤–µ–Ω —Ä–µ–Ω–¥–µ—Ä –Ω–∞ –∫–æ–ª–∏—á–∫–∞—Ç–∞ */
function updateCartUI(){
  // –±—Ä–æ–π–∫–∞ –≤—ä—Ä—Ö—É –±—É—Ç–æ–Ω–∞
  cartCount.textContent = CART.length;

  // –ø—Ä–∞–∑–Ω–∞ –∫–æ–ª–∏—á–∫–∞
  if (CART.length === 0){
    cartItemsEl.innerHTML = `<div class="cart-empty">–ö–æ–ª–∏—á–∫–∞—Ç–∞ –µ –ø—Ä–∞–∑–Ω–∞.</div>`;
    cartTotalRow.style.display = 'none';
    orderNowBtn.disabled = true;
    noteWrapper.style.display = 'none';
    persistCartSnapshot();
    return;
  }

  // —Ä–µ–¥–æ–≤–µ + –≤–∏–¥–∏–º–∏ –¥–æ–±–∞–≤–∫–∏
  cartItemsEl.innerHTML = CART.map(it => {
    const addonsLine = it.addons?.length
      ? `<div style="font-size:12px; opacity:.8; margin-top:2px">
           + ${it.addons.map(a=>`${esc(a.label)} (${fmtLv(a.price)})`).join(', ')}
         </div>` : '';
    return `
      <div class="cart-item">
        <img src="${it.img}" alt="${esc(it.baseName || it.name)}">
        <div>
          <div class="name">${esc(it.baseName || it.name)}</div>
          ${addonsLine}
          <div class="price" style="margin-top:4px">
            ${fmtLv(it.price)} <span style="opacity:.75">(${fmtEur(it.price)})</span>
          </div>
        </div>
        <div><button class="add-btn" data-remove="${it._id}">‚úï</button></div>
      </div>`;
  }).join('');

  // –ø—Ä–µ–º–∞—Ö–≤–∞–Ω–µ
  cartItemsEl.querySelectorAll('[data-remove]').forEach((btn)=>{
    btn.addEventListener('click', ()=>{
      const id = btn.getAttribute('data-remove');
      const i = CART.findIndex(x => String(x._id) === id);
      if (i>=0){ CART.splice(i,1); updateCartUI(); }
    });
  });

  // —Ç–æ—Ç–∞–ª + UI
  const total = CART.reduce((s, x)=> s + (Number(x.price)||0), 0);
  cartTotal.textContent = `${fmtLv(total)}  (${fmtEur(total)})`;
  cartTotalRow.style.display = '';
  orderNowBtn.disabled = false;
  noteWrapper.style.display = 'block';

  persistCartSnapshot();

  // –∑–∞–ø–∏—Å –Ω–∞ –±–µ–ª–µ–∂–∫–∞—Ç–∞ (–≤—Ä—ä–∑–≤–∞–º–µ —Å–∞–º–æ –≤–µ–¥–Ω—ä–∂)
  if (!orderNoteEl.dataset.bound) {
    orderNoteEl.addEventListener('input', () => {
      localStorage.setItem(LS_ORDER_NOTE, orderNoteEl.value);
    });
    orderNoteEl.dataset.bound = '1';
  }
}



function restoreOrderNote(){

  orderNoteEl.value = localStorage.getItem(LS_ORDER_NOTE) || '';
}

function persistCartSnapshot(){
  try{
    const itemsSnapshot = CART.map(({_id, name, baseName, price, basePrice, img, addons}) => ({
      _id, name, baseName, price, basePrice, img, addons: addons || []
    }));
    const total = CART.reduce((s, x)=> s + (Number(x.price)||0), 0);
    localStorage.setItem(LS_CART_ITEMS, JSON.stringify(itemsSnapshot));
    localStorage.setItem(LS_CART_TOTAL, String(total));
    localStorage.setItem(LS_ORDER_NOTE, orderNoteEl.value || '');
  }catch(e){ console.warn('LS error:', e); }
}


function restoreCartFromLS() {
  try {
    const raw = localStorage.getItem(LS_CART_ITEMS);
    const items = JSON.parse(raw || '[]');

    if (Array.isArray(items) && items.length > 0) {
      items.forEach(it => CART.push({
        _id: it._id || (Date.now() + '' + Math.random()),
        name: it.name || '–ë–µ–∑ –∏–º–µ',
        baseName: it.baseName || it.name || '–ë–µ–∑ –∏–º–µ',
        price: Number(it.price) || Number(it.basePrice) || 0,
        basePrice: Number(it.basePrice) || Number(it.price) || 0,
        img: it.img || '',
        addons: Array.isArray(it.addons) ? it.addons : []
      }));
    }

    updateCartUI();
    restoreOrderNote();
  } catch (e) {
    console.warn('‚ö†Ô∏è –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –≤—ä–∑—Å—Ç–∞–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ –∫–æ–ª–∏—á–∫–∞—Ç–∞ –æ—Ç LocalStorage:', e);
  }
}


/* –û—Ç–≤–∞—Ä—è–Ω–µ/–∑–∞—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ –º–æ–¥–∞–ª–∞ */
function openCart(){ updateCartUI(); cartOverlay.style.display = 'flex'; cartOverlay.setAttribute('aria-hidden','false'); }
function closeCart(){ cartOverlay.style.display = 'none'; cartOverlay.setAttribute('aria-hidden','true'); }
document.getElementById('cartClose').addEventListener('click', closeCart);
cartOverlay.addEventListener('click', (e)=>{ if(e.target === cartOverlay) closeCart(); });
cartBtn.addEventListener('click', openCart);

/* –ü–æ—Ä—ä—á–∞–π —Å–µ–≥–∞ ‚Üí index3.html (–ª–æ–∫–∞–ª–Ω–æ –∏–ª–∏ —É–µ–±) */
orderNowBtn.addEventListener('click', ()=>{
  if (CART.length === 0) return;
  persistCartSnapshot();
  const target = (location.protocol === 'file:') ? 'file:///E:/BBQ_SITE/index3.html' : 'index3.html';
  window.location.href = target;
});

/* –ö–∞—Ç–∞–ª–æ–≥ —Å —Ü–µ–Ω–∏ –≤ –ª–≤. */
const CATALOG = {
  burgeri:{title:'–°–ê–ù–î–í–ò–ß–ò',items:[
    {
    name:'–ö–û–ù–°–ö–ê –ü–õ–ï–°–ö–ê–í–ò–¶–ê',
    price:9.00,
    img:'snimki/produkti/2menu/konski.jpg',
    desc:'–ö–æ–Ω—Å–∫–æ –º–µ—Å–æ –Ω–∞ –∂–∞—Ä —Å—ä—Å —Å–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏, —Ç—Ä–∏ –≤–∏–¥–∞ —Å–æ—Å–æ–≤–µ (–∫–µ—Ç—á—É–ø, –º–∞–π–æ–Ω–µ–∑–∞, –≥–æ—Ä—á–∏—Ü–∞), –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∫–∏ –∏ –ø—Ä—è—Å–Ω–∞ –ø–∏—Ç–∫–∞ (—Å–∞–º—É–Ω).'
  },
  {
    name:'–¢–ï–õ–ï–®–ö–ê –ü–õ–ï–°–ö–ê–í–ò–¶–ê',
    price:9.00,
    img:'snimki/produkti/2menu/sharska.jpg',
    desc:'–¢–µ–ª–µ—à–∫–æ –º–ª—è–Ω–æ –º–µ—Å–æ –Ω–∞ –∂–∞—Ä —Å—ä—Å —Å–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏, —Ç—Ä–∏ –≤–∏–¥–∞ —Å–æ—Å–æ–≤–µ (–∫–µ—Ç—á—É–ø, –º–∞–π–æ–Ω–µ–∑–∞, –≥–æ—Ä—á–∏—Ü–∞), –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∫–∏ –∏ –ø—Ä—è—Å–Ω–∞ –ø–∏—Ç–∫–∞ (—Å–∞–º—É–Ω).'
  },
  {
    name:'–®–ê–†–°–ö–ê –ü–õ–ï–°–ö–ê–í–ò–¶–ê',
    price:9.50,
    img:'snimki/produkti/2menu/sharska.jpg',
    desc:'–¢–µ–ª–µ—à–∫–æ –º–ª—è–Ω–æ –º–µ—Å–æ —Å –∫–∞—à–∫–∞–≤–∞–ª –Ω–∞ –∂–∞—Ä —Å—ä—Å —Å–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏, —Ç—Ä–∏ –≤–∏–¥–∞ —Å–æ—Å–æ–≤–µ (–∫–µ—Ç—á—É–ø, –º–∞–π–æ–Ω–µ–∑–∞, –≥–æ—Ä—á–∏—Ü–∞), –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∫–∏ –∏ –ø—Ä—è—Å–Ω–∞ –ø–∏—Ç–∫–∞ (—Å–∞–º—É–Ω).'
  },
  {
    name:'–°–í–ò–ù–°–ö–ê –í–ï–®–ê–õ–ò–¶–ê',
    price:9.00,
    img:'snimki/produkti/2menu/sharska.jpg',
    desc:'–ö—Ä–µ—Ö–∫–æ —Å–≤–∏–Ω—Å–∫–æ –∫–æ–Ω—Ç—Ä–∞—Ñ–∏–ª–µ –Ω–∞ –∂–∞—Ä —Å—ä—Å —Å–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏, —Ç—Ä–∏ –≤–∏–¥–∞ —Å–æ—Å–æ–≤–µ (–∫–µ—Ç—á—É–ø, –º–∞–π–æ–Ω–µ–∑–∞, –≥–æ—Ä—á–∏—Ü–∞), –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∫–∏ –∏ –ø—Ä—è—Å–Ω–∞ –ø–∏—Ç–∫–∞ (—Å–∞–º—É–Ω).'
  },
  {
    name:'–ü–ò–õ–ï–®–ö–ò –°–¢–ï–ö',
    price:9.00,
    img:'snimki/produkti/2menu/pileshkistek.jpg',
    desc:'–ü–∏–ª–µ—à–∫–æ —Ñ–∏–ª–µ –Ω–∞ –∂–∞—Ä —Å—ä—Å —Å–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏, —Ç—Ä–∏ –≤–∏–¥–∞ —Å–æ—Å–æ–≤–µ (–∫–µ—Ç—á—É–ø, –º–∞–π–æ–Ω–µ–∑–∞, –≥–æ—Ä—á–∏—Ü–∞), –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∫–∏ –∏ –ø—Ä—è—Å–Ω–∞ –ø–∏—Ç–∫–∞ (—Å–∞–º—É–Ω).'
  },
  {
    name:'–í–ï–ì–ï–¢–ê–†–ò–ê–ù–°–ö–ò',
    price:5.00,
    img:'snimki/produkti/2menu/vegan.jpg',
    desc:'–°–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏ , –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∫–∏ –∏ –ø—Ä—è—Å–Ω–∞ –ø–∏—Ç–∫–∞ (—Å–∞–º—É–Ω).'
  },
  {
    name:'–î–í–û–ô–ù–ê –®–ê–†–°–ö–ê –ü–õ–ï–°–ö–ê–í–ò–¶–ê',
    price:12.50,
    img:'snimki/produkti/2menu/sharska.jpg',
    desc:'–î–≤–æ–π–Ω–∞ —Ç–µ–ª–µ—à–∫–∞ –ø–ª–µ—Å–∫–∞–≤–∏—Ü–∞ —Å –∫–∞—à–∫–∞–≤–∞–ª –Ω–∞ –∂–∞—Ä —Å—ä—Å —Å–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏, –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∫–∏ –∏ –ø—Ä—è—Å–Ω–∞ –ø–∏—Ç–∫–∞ (—Å–∞–º—É–Ω).'
  },
  {
    name:'–î–í–û–ô–ù–ê –ö–û–ù–°–ö–ê –ü–õ–ï–°–ö–ê–í–ò–¶–ê',
    price:12.00,
    img:'snimki/produkti/2menu/konski.jpg',
    desc:'–ú–ª—è–Ω–æ –∫–æ–Ω—Å–∫–æ –º–µ—Å–æ –Ω–∞ –∂–∞—Ä —Å—ä—Å —Å–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏, –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∫–∏ –∏ –ø—Ä—è—Å–Ω–∞ –ø–∏—Ç–∫–∞ (—Å–∞–º—É–Ω).'
  },
  {
    name:'–î–í–û–ô–ù–ê –°–í–ò–ù–°–ö–ê –í–ï–®–ê–õ–ò–¶–ê',
    price:12.00,
    img:'snimki/produkti/2menu/sharska.jpg',
    desc:'–î–≤–æ–π–Ω–æ —Å–≤–∏–Ω—Å–∫–æ –∫–æ–Ω—Ç—Ä–∞—Ñ–∏–ª–µ –Ω–∞ –∂–∞—Ä —Å—ä—Å —Å–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏, –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∫–∏ –∏ –ø—Ä—è—Å–Ω–∞ –ø–∏—Ç–∫–∞ (—Å–∞–º—É–Ω).'
  },
  {
    name:'–î–í–û–ï–ù –ü–ò–õ–ï–®–ö–ò –°–¢–ï–ö',
    price:12.00,
    img:'snimki/produkti/2menu/pileshkistek.jpg',
    desc:'–î–≤–æ–π–Ω–æ –ø–∏–ª–µ—à–∫–æ —Ñ–∏–ª–µ –Ω–∞ –∂–∞—Ä —Å—ä—Å —Å–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏, –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∫–∏ –∏ –ø—Ä—è—Å–Ω–∞ –ø–∏—Ç–∫–∞ (—Å–∞–º—É–Ω).'
  },
  {
    name:'–î–í–û–ô–ù–ê –¢–ï–õ–ï–®–ö–ê –ü–õ–ï–°–ö–ê–í–ò–¶–ê',
    price:12.00,
    img:'snimki/produkti/2menu/sharska.jpg',
    desc:'–î–≤–æ–π–Ω–∞ —Ç–µ–ª–µ—à–∫–∞ –ø–ª–µ—Å–∫–∞–≤–∏—Ü–∞ –Ω–∞ –∂–∞—Ä —Å—ä—Å —Å–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏, –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∫–∏ –∏ –ø—Ä—è—Å–Ω–∞ –ø–∏—Ç–∫–∞ (—Å–∞–º—É–Ω).'
  },
  {
    name:'–ë–£–†–ì–ï–† –° –î–™–†–ü–ê–ù–û –¢–ï–õ–ï–®–ö–û',
    price:12.50,
    img:'snimki/produkti/2menu/durpano.jpg',
    desc:'–î—ä—Ä–ø–∞–Ω–æ —Ç–µ–ª–µ—à–∫–æ –Ω–∞ –∂–∞—Ä —Å—ä—Å —Å–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏, –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∫–∏ –∏ –ø—Ä—è—Å–Ω–∞ –ø–∏—Ç–∫–∞ (—Å–∞–º—É–Ω).'
  },
]},

  palachinki:{
    title:'–ü–ê–õ–ê–ß–ò–ù–ö–ò',
    groups:[
      { heading:'–°–õ–ê–î–ö–ò', items:[
        {name:'–ü–ê–õ–ê–ß–ò–ù–ö–ê –°–™–° NUCREMA –®–û–ö–û–õ–ê–î',price:5.00,img:'snimki/produkti/–ü–ê–õ–ê–ß–ò–ù–ö–ò/shokolad.jpg'},
        {name:'–ü–ê–õ–ê–ß–ò–ù–ö–ê –°–™–° NUCREMA –®–û–ö–û–õ–ê–î –ò –ë–ê–ù–ê–ù',price:6.00,img:'snimki/produkti/–ü–ê–õ–ê–ß–ò–ù–ö–ò/shokoladibanan.png'},
        {name:'–ü–ê–õ–ê–ß–ò–ù–ö–ê –° –ú–ï–î –ò –û–†–ï–•–ò',price:5.50,img:'snimki/produkti/–ü–ê–õ–ê–ß–ò–ù–ö–ò/mediorehi.png'},
        {name:'–ü–ê–õ–ê–ß–ò–ù–ö–ê –°–™–° –°–õ–ê–î–ö–û –û–¢ –ë–û–†–û–í–ò–ù–ö–ò',price:5.00,img:'snimki/produkti/–ü–ê–õ–ê–ß–ò–ù–ö–ò/borovinki.png'},
        {name:'–ü–ê–õ–ê–ß–ò–ù–ö–ê –°–™–° –°–õ–ê–î–ö–û –û–¢ –ü–†–ê–°–ö–û–í–ê',price:5.00,img:'snimki/produkti/–ü–ê–õ–ê–ß–ò–ù–ö–ò/praskovi.png'},
        {name:'–ü–ê–õ–ê–ß–ò–ù–ö–ê –°–™–° –°–õ–ê–î–ö–û –û–¢ –Ø–ì–û–î–ò',price:5.00,img:'snimki/produkti/–ü–ê–õ–ê–ß–ò–ù–ö–ò/qgodi.png'},
      ]},
      { heading:'–°–û–õ–ï–ù–ò', items:[
        { name:'–ü–ê–õ–ê–ß–ò–ù–ö–ê –° –ö–ê–®–ö–ê–í–ê–õ –ò –ë–ï–ö–û–ù', price:6.00, img:'snimki/produkti/–ü–ê–õ–ê–ß–ò–ù–ö–ò/kashkavalibekon.png' },
        {name:'–°–ò–†–ï–ù–ï –ò –°–õ–ê–î–ö–û',price:5.50,img:'snimki/produkti/–ü–ê–õ–ê–ß–ò–ù–ö–ò/sirene.png'},
        {name:'–ü–ê–õ–ê–ß–ò–ù–ö–ê –°–™–° –°–ò–†–ï–ù–ï',price:5.00,img:'snimki/produkti/–ü–ê–õ–ê–ß–ò–ù–ö–ò/sirene.png'},
        {name:'–ü–ê–õ–ê–ß–ò–ù–ö–ê –°–™–° –ö–ê–®–ö–ê–í–ê–õ',price:5.50,img:'snimki/produkti/–ü–ê–õ–ê–ß–ò–ù–ö–ò/kashkaval.png'},
        {name:'–ü–ê–õ–ê–ß–ò–ù–ö–ê –°–™–° –°–ò–†–ï–ù–ï –ò –ö–ê–®–ö–ê–í–ê–õ',price:6.00,img:'snimki/produkti/–ü–ê–õ–ê–ß–ò–ù–ö–ò/kashkavalisirene.png'},
        {name:'–ü–ê–õ–ê–ß–ò–ù–ö–ê –° –ú–ê–°–õ–û',price:4.50,img:'snimki/produkti/–ü–ê–õ–ê–ß–ò–ù–ö–ò/maslo.png'},
      ]}
    ]
  },
  strandzhanki:{ title:'–°–¢–†–ê–ù–î–ñ–ê–ù–ö–ò', items:[
    {name:'–¢–ï–õ–ï–®–ö–ê –°–¢–†–ê–ù–î–ñ–ê–ù–ö–ê',price:5.00,img:CAT_THUMBS.strandzhanki},
    {name:'–°–í–ò–ù–°–ö–ê –°–¢–†–ê–ù–î–ñ–ê–ù–ö–ê',price:5.00,img:CAT_THUMBS.strandzhanki},
  ]},
  kartofi:{ title:'–ö–ê–†–¢–û–§–ò', items:[
    {name:'–ü–™–†–ñ–ï–ù–ò –ö–ê–†–¢–û–§–ò 200 –ì–†–ê–ú–ê',price:4.00,img:'snimki/produkti/–ö–ê–†–¢–û–§–ò/kartofi.jpg'},
    {name:'–ö–ê–†–¢–û–§–ò –° –ß–ï–î–™–† –ò –ë–ï–ö–û–ù',price:6.50,img:'snimki/produkti/–ö–ê–†–¢–û–§–ò/kartofisbekonichedur.jpg'},
    {name:'–ö–ê–†–¢–û–§–ò –° –ß–ï–î–™–†',price:5.00,img:'snimki/produkti/–ö–ê–†–¢–û–§–ò/kartofischedur.jpg'},
  ]},
salati:{ 
  title:'–°–ê–õ–ê–¢–ò', 
  items:[
    {
      name:'–°–ê–õ–ê–¢–ê –¶–ï–ó–ê–†', 
      price:8.50, 
      img:CAT_THUMBS.salati,
      desc:'–ê–π—Å–±–µ—Ä–≥, —á–µ—Ä–∏ –¥–æ–º–∞—Ç–∏, –∫—Ä—É—Ç–æ–Ω–∏, —Å–æ—Å –¶–µ–∑–∞—Ä, –ø–∏–ª–µ—à–∫–æ —Ñ–∏–ª–µ, –ø–∞—Ä–º–µ–∑–∞–Ω'
    }
  ]
},
  

/* –ü–û–†–¶–ò–ò ‚Äì –±–µ–∑ –ø–∏—Ç–∫–∞ –∏ –±–µ–∑ —Ä–∞–∑—è–¥–∫–∞, ~550 –≥ */
  portsii:{ title:'–ü–û–†–¶–ò–ò', items:[
    {
      name:'–¢–ï–õ–ï–®–ö–ê –ü–õ–ï–°–ö–ê–í–ò–¶–ê –ü–û–†–¶–ò–Ø',
      price:11.50,
      img:'snimki/produkti/–ü–û–†–¶–ò–ò/sharsko.jpg',
      desc:'–ú–ª—è–Ω–æ —Ç–µ–ª–µ—à–∫–æ –º–µ—Å–æ –Ω–∞ —Å–∫–∞—Ä–∞, —Å—ä—Å —Å–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏ –∏ –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∏. –ë–µ–∑ –ø–∏—Ç–∫–∞ –∏ –±–µ–∑ —Ä–∞–∑—è–¥–∫–∞. ~550 –≥.'
    },
    {
      name:'–ö–û–ù–°–ö–ê –ü–õ–ï–°–ö–ê–í–ò–¶–ê –ü–û–†–¶–ò–Ø',
      price:11.50,
      img:'snimki/produkti/–ü–û–†–¶–ò–ò/sharsko.jpg',
      desc:'–ü—Ä—è—Å–Ω–æ –º–ª—è–Ω–æ –∫–æ–Ω—Å–∫–æ –Ω–∞ –∂–∞—Ä, —Å—ä—Å —Å–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏ –∏ –∫–∞—Ä—Ç–æ—Ñ–∏. –ë–µ–∑ –ø–∏—Ç–∫–∞ –∏ –±–µ–∑ —Ä–∞–∑—è–¥–∫–∞. ~550 –≥.'
    },
    {
      name:'–ü–ò–õ–ï–®–ö–û –§–ò–õ–ï –ü–û–†–¶–ò–Ø',
      price:11.00,
      img:'snimki/produkti/–ü–û–†–¶–ò–ò/pileshko.jpg',
      desc:'–ü—Ä—è—Å–Ω–æ –ø–∏–ª–µ—à–∫–æ —Ñ–∏–ª–µ –Ω–∞ –∂–∞—Ä —Å –≥–∞—Ä–Ω–∏—Ç—É—Ä–∞ –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∏ –∏ —Å–≤–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏. –ë–µ–∑ –ø–∏—Ç–∫–∞ –∏ –±–µ–∑ —Ä–∞–∑—è–¥–∫–∞. ~550 –≥.'
    },
    {
      name:'–°–í–ò–ù–°–ö–û –§–ò–õ–ï –ü–û–†–¶–ò–Ø',
      price:11.00,
      img:'snimki/produkti/–ü–û–†–¶–ò–ò/svinsko.jpg',
      desc:'–ö—Ä–µ—Ö–∫–æ —Å–≤–∏–Ω—Å–∫–æ –∫–æ–Ω—Ç—Ä–∞ —Ñ–∏–ª–µ –Ω–∞ –∂–∞—Ä —Å –∫–∞—Ä—Ç–æ—Ñ–∏ –∏ —Å–≤–µ–∂–∞ –≥–∞—Ä–Ω–∏—Ç—É—Ä–∞. –ë–µ–∑ –ø–∏—Ç–∫–∞ –∏ –±–µ–∑ —Ä–∞–∑—è–¥–∫–∞. ~550 –≥.'
    },
    {
      name:'–¢–ï–õ–ï–®–ö–ò –ö–ï–ë–ê–ü–ß–ï–¢–ê –ü–û–†–¶–ò–Ø',
      price:9.50,
      img:'snimki/produkti/–ü–û–†–¶–ò–ò/kebapche.jpg',
      desc:'–ê—Ä–æ–º–∞—Ç–Ω–∏ —Ç–µ–ª–µ—à–∫–∏ –∫–µ–±–∞–ø—á–µ—Ç–∞ –Ω–∞ –∂–∞—Ä —Å –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∏ –∏ —Å–∞–ª–∞—Ç–∞. –ë–µ–∑ –ø–∏—Ç–∫–∞ –∏ –±–µ–∑ —Ä–∞–∑—è–¥–∫–∞. ~550 –≥.'
    },
    {
      name:'–®–ê–†–°–ö–ê –ü–õ–ï–°–ö–ê–í–ò–¶–ê –ü–û–†–¶–ò–Ø',
      price:12.50,
      img:'snimki/produkti/–ü–û–†–¶–ò–ò/sharsko.jpg',
      desc:'–¢–µ–ª–µ—à–∫–∞ –ø–ª–µ—Å–∫–∞–≤–∏—Ü–∞ —Å –∫–∞—à–∫–∞–≤–∞–ª, –≥–∞—Ä–Ω–∏—Ä–∞–Ω–∞ —Å –ø—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∏ –∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏. –ë–µ–∑ –ø–∏—Ç–∫–∞ –∏ –±–µ–∑ —Ä–∞–∑—è–¥–∫–∞. ~550 –≥.'
    },
  ]},

dobavki:{ title:'–î–û–ë–ê–í–ö–ò', items:[
  {name:'–°–ò–†–ï–ù–ï 100 –ì–†–ê–ú–ê',   price:1.50, img:'snimki/produkti/–î–û–ë–ê–í–ö–ò/sirene100grama.png'},
  {name:'–ö–ê–®–ö–ê–í–ê–õ 100 –ì–†–ê–ú–ê', price:1.50, img:'snimki/produkti/–î–û–ë–ê–í–ö–ò/kashkaval100grama.png'},
  {name:'–†–ê–ó–Ø–¢–ö–ê',            price:1.00, img:'snimki/produkti/–î–û–ë–ê–í–ö–ò/razqtka.png'},
  {name:'–ú–ï–°–û –î–û–ë–ê–í–ö–ê',       price:4.00, img:'snimki/produkti/–î–û–ë–ê–í–ö–ò/meso.jpg'},
  {name:'–ü–ò–¢–ö–ê',              price:1.50, img:'snimki/produkti/–î–û–ë–ê–í–ö–ò/pitka2.jpg'},
]},

  sosove:{ title:'–°–û–°–û–í–ï', items:[
    {name:'–î–û–ú–ê–®–ù–ê –†–ê–ó–Ø–î–ö–ê 100–ì–†', price:1.50, img:CAT_THUMBS.sosove},
    {name:'–î–û–ú–ê–®–ù–ê –ú–ê–ô–û–ù–ï–ó–ê',     price:1.50, img:CAT_THUMBS.sosove},
    {name:'–õ–Æ–¢–ï–ù–ò–¶–ê',             price:1.50, img:CAT_THUMBS.sosove},
    {name:'–ö–ï–¢–ß–£–ü',               price:1.00, img:CAT_THUMBS.sosove},
    {name:'–ì–û–†–ß–ò–¶–ê',              price:1.00, img:CAT_THUMBS.sosove},
    {name:'–°–û–° –¶–ï–ó–ê–†',            price:1.50, img:CAT_THUMBS.sosove},
  ]},
  deserti:{ title:'–î–ï–°–ï–†–¢–ò', items:[
    {name:'–õ–ï–ö –î–ï–°–ï–†–¢ –° –ß–ò–Ø, –ú–Æ–°–õ–ò –ò –°–£–®–ï–ù–ò –ü–õ–û–î–û–í–ï',price:4.50,img:CAT_THUMBS.deserti},
    {name:'–õ–ï–ö –î–ï–°–ï–†–¢ –° –ß–ò–Ø, –ú–Æ–°–õ–ò –ò –°–õ–ê–î–ö–û –û–¢ –ë–û–†–û–í–ò–ù–ö–ò',price:4.50,img:CAT_THUMBS.deserti},
  ]},
  bezalkoholni:{ title:'–ë–ï–ó–ê–õ–ö–û–•–û–õ–ù–ò', items:[
    {name:'–ö–û–õ–ê –ö–ï–ù',price:2.00,img:CAT_THUMBS.bezalkoholni},
    {name:'–§–ê–ù–¢–ê –ü–û–†–¢–û–ö–ê–õ –ö–ï–ù',price:2.00,img:CAT_THUMBS.bezalkoholni},
    {name:'–ö–û–ö–ê –ö–û–õ–ê –ë–£–¢–ò–õ–ö–ê',price:2.50,img:CAT_THUMBS.bezalkoholni},
    {name:'–§–ê–ù–¢–ê –ü–û–†–¢–û–ö–ê–õ –ë–£–¢–ò–õ–ö–ê',price:2.50,img:CAT_THUMBS.bezalkoholni},
    {name:'–°–ü–†–ê–ô–¢ –ë–£–¢–ò–õ–ö–ê',price:2.50,img:CAT_THUMBS.bezalkoholni},
    {name:'–°–¢–£–î–ï–ù –ß–ê–ô',price:2.50,img:CAT_THUMBS.bezalkoholni},
    {name:'–ö–ê–ü–ò –ü–™–õ–ü–ò',price:2.50,img:CAT_THUMBS.bezalkoholni},
    {name:'–ö–ê–ü–ò –ö–£–¢–ò–Ø',price:1.70,img:CAT_THUMBS.bezalkoholni},
    {name:'–°–û–î–ê –ë–£–¢–ò–õ–ö–ê',price:1.90,img:CAT_THUMBS.bezalkoholni},
    {name:'–ú–ê–õ–ö–ê –ú–ò–ù–ï–†–ê–õ–ù–ê –í–û–î–ê',price:1.50,img:CAT_THUMBS.bezalkoholni},
    {name:'–ì–û–õ–Ø–ú–ê –ú–ò–ù–ï–†–ê–õ–ù–ê –í–û–î–ê',price:2.00,img:CAT_THUMBS.bezalkoholni},
    {name:'–ö–ê–ü–ò –õ–ò–ú–û–ù–ê–î–ê',price:2.50,img:CAT_THUMBS.bezalkoholni},
    {name:'–¢–û–ù–ò–ö –ë–£–¢–ò–õ–ö–ê',price:1.90,img:CAT_THUMBS.bezalkoholni},
  ]},
  bira:{ title:'–ë–ò–†–ê', items:[
    {name:'–ë–ò–†–ê –ö–û–†–û–ù–ê',price:3.50,img:CAT_THUMBS.bira},
    {name:'–•–ê–ô–ù–ò–ö–ï–ù',price:4.00,img:CAT_THUMBS.bira},
    {name:'–°–¢–ï–õ–ê –ê–†–¢–û–ê',price:4.50,img:CAT_THUMBS.bira},
  ]},
  hell:{
    title:'HELL',
    view:'gallery',
    hellPrice:2.00,
    groups:[
      { heading:'HELL -250–º–ª', images:[
          'snimki/hell_sminki/normal/hell_apple.jpg',
          'snimki/hell_sminki/normal/hell_clasic.jpg',
          'snimki/hell_sminki/normal/hell_classic.jpg',
          'snimki/hell_sminki/normal/hell_redgrape.jpg',
          'snimki/hell_sminki/normal/hell_watermelon.jpg'
      ]},
      { heading:'ICE COFFE HELL -250 –º–ª', images:[
          'snimki/hell_sminki/ice_coffe/ice_coffe_capochino.png',
          'snimki/hell_sminki/ice_coffe/ice_coffe_caramel.png',
          'snimki/hell_sminki/ice_coffe/ice_coffe_coconut.png',
          'snimki/hell_sminki/ice_coffe/ice_coffe_doubleespresso.png',
          'snimki/hell_sminki/ice_coffe/ice_coffe_late.png',
          'snimki/hell_sminki/ice_coffe/ice_coffe_pinklatte.png',
          'snimki/hell_sminki/ice_coffe/ice_coffe_vanilia.png',
          'snimki/hell_sminki/ice_hell_distachio.png'
      ]}
    ]
  },
  voda:{
    title:'–í–û–î–ê',
    view:'water2',
    groups:[
      { heading:'Devin', pair:[
          {src:'snimki/produkti/–í–û–î–ê/golqma_devin.jpg', label:'–ì–æ–ª—è–º–∞ –î–µ–≤–∏–Ω -1,5–õ', price:2.00},
          {src:'snimki/produkti/–í–û–î–ê/malka_devin.jpg', label:'–ú–∞–ª–∫–∞ –î–µ–≤–∏–Ω -500–º–ª',  price:1.50}
      ]},
      { heading:'–ë–∞–Ω–∫—è', pair:[
          {src:'snimki/produkti/–í–û–î–ê/golqma_bankq.jpg', label:'–ì–æ–ª—è–º–∞ –ë–∞–Ω–∫—è -1,5–õ', price:2.00},
          {src:'snimki/produkti/–í–û–î–ê/malka_bankq.jpg', label:'–ú–∞–ª–∫–∞ –ë–∞–Ω–∫—è -500–º–ª',  price:1.50}
      ]}
    ]
  },
  gazirana_voda:{
    title:'–ì–ê–ó–ò–†–ê–ù–ê –í–û–î–ê',
    view:'water2',
    groups:[
      { heading:'–ú–∞—Ä–∫–∏', pair:[
          {src:'snimki/produkti/–ì–ê–ó–ò–†–ê–ù–ê_–í–û–î–ê/shveps.jpg',  label:'Schweppes -500–º–ª', price:1.90},
          {src:'snimki/produkti/–ì–ê–ó–ò–†–ê–ù–ê_–í–û–î–ê/sprait.jpg',  label:'Sprite -500–º–ª',    price:1.90}
      ]}
    ]
  },
  fanta:{
    title:'–§–ê–ù–¢–ê',
    items:[
      {name:'–§–∞–Ω—Ç–∞ –ü–æ—Ä—Ç–æ–∫–∞–ª -330–º–ª',      price:2.00, img:'snimki/produkti/–§–ê–ù–¢–ê/fanta_portokal.jpg'},
      {name:'–§–∞–Ω—Ç–∞ –õ–∏–º–æ–Ω -330–º–ª',         price:2.00, img:'snimki/produkti/–§–ê–ù–¢–ê/fanta_lemon.jpg'},
      {name:'–§–∞–Ω—Ç–∞ –õ–∞–π—á–∏ -330–º–ª',         price:2.00, img:'snimki/produkti/–§–ê–ù–¢–ê/fanta_laici.jpg'},
      {name:'–§–∞–Ω—Ç–∞ Tutti Frutti -330–º–ª',  price:2.00, img:'snimki/produkti/–§–ê–ù–¢–ê/fanta_tutti.jpg'},
      {name:'–§–∞–Ω—Ç–∞ –ó–µ–ª–µ–Ω–∞ —è–±—ä–ª–∫–∞ 330–º–ª', price:2.00, img:'snimki/produkti/–§–ê–ù–¢–ê/fanta_greenapple.jpg'},
      {name:'–§–∞–Ω—Ç–∞ –ë–æ—Ä–æ–≤–∏–Ω–∫–∞ -330–º–ª',     price:2.00, img:'snimki/produkti/–§–ê–ù–¢–ê/sinq_blueberry.jpg'}
    ]
  },
  studen_chai:{
    title:'–°–¢–£–î–ï–ù –ß–ê–ô',
    items:[
      { name:'Fuze Tea –ì–æ—Ä—Å–∫–∏ –ø–ª–æ–¥ -500–º–ª', price:2.50, img:'snimki/produkti/–°–¢–£–î–ï–ù_–ß–ê–ô/fuze_tea_forest_frut.jpg' },
      { name:'Fuze Tea –ü—Ä–∞—Å–∫–æ–≤–∞ -500–º–ª',    price:2.50, img:'snimki/produkti/–°–¢–£–î–ï–ù_–ß–ê–ô/fuze_tea_praskova.jpg' }
    ]
  },
  kola:{
    title:'–ö–û–õ–ê',
    items:[
      {name:'–ö–æ–ª–∞ –ö–µ–Ω -330–º–ª',        price:2.00, img:'snimki/produkti/–ö–û–õ–ê/kolaken.jpg'},
      {name:'–ö–æ–ª–∞ –ö–µ–Ω Zero -330–º–ª',   price:2.00, img:'snimki/produkti/–ö–û–õ–ê/kolakenzero.jpg'},
      {name:'–ö–æ–ª–∞ –ü–í–¶ -500–º–ª',    price:2.50, img:'snimki/produkti/–ö–û–õ–ê/kolapvc.jpg'},
      {name:'–ö–æ–ª–∞ –ü–í–¶ Zero -500–º–ª',price:2.50, img:'snimki/produkti/–ö–û–õ–ê/kolapvczero.jpg'}
    ]
  },
  sok:{
    title:'–°–û–ö',
    items:[
      {name:'Cappy –ü–æ—Ä—Ç–æ–∫–∞–ª -500–º–ª', price:2.50, img:'snimki/produkti/–°–û–ö/cappy_orange.jpg'},
      {name:'Cappy –õ–∏–º–æ–Ω -500–º–ª',    price:2.50, img:'snimki/produkti/–°–û–ö/cappy_lemon.jpg'}
    ]
  },
  airqn:{
    title:'–ê–ô–†–Ø–ù',
    groups:[
      { heading:'–í–µ—Ä–µ—è', items:[
          {name:'–ê–π—Ä—è–Ω –í–µ—Ä–µ—è –ì–æ–ª—è–º -480–º–ª', price:2.00, img:'snimki/produkti/–ê–ô–†–ê–ù/airan_vereq_golqm.jpg'},
          {name:'–ê–π—Ä—è–Ω –í–µ—Ä–µ—è –ú–∞–ª—ä–∫ -300–º–ª', price:1.50, img:'snimki/produkti/–ê–ô–†–ê–ù/airan_vereq_maluk.jpg'}
      ]},
      { heading:'Meggle', items:[
          {name:'–ì–æ–ª—è–º –ê–π—Ä—è–Ω Meggle –ë—É—Ç–∏–ª–∫–∞ 500 –º–ª', price:2.80, img:'snimki/produkti/–ê–ô–†–ê–ù/megle_airan_butilka.jpg'},
          {name:'–ê–π—Ä—è–Ω Meggle –ö–æ—Ñ–∏—á–∫–∞ -300–º–ª',    price:2.00, img:'snimki/produkti/–ê–ô–†–ê–ù/megle_airan_kofa.jpg'},
          {name:'–ê–π—Ä—è–Ω Meggle –ü–ª–æ–¥–æ–≤ –ö–æ—Ñ–∏—á–∫–∞ -330–º–ª',  price:3.00, img:'snimki/produkti/–ê–ô–†–ê–ù/mwgle_airan_plodov.jpg'}
      ]}
    ]
  },
  xixo:{
    title:'XIXO',
    items:[
      {name:'XIXO Cola -250–º–ª',               price:1.10, img:'snimki/produkti/–•–ò–•–û/xixo_cola.jpg'},
      {name:'XIXO Cherry Cola -250–º–ª',        price:1.10, img:'snimki/produkti/–•–ò–•–û/xixo_cherry_cola.jpg'},
      {name:'XIXO –î–∏–Ω—è -250–º–ª',               price:1.10, img:'snimki/produkti/–•–ò–•–û/xixo_dinq.jpg'},
      {name:'XIXO –ì–æ—Ä—Å–∫–∏ –ø–ª–æ–¥ -250–º–ª',        price:1.10, img:'snimki/produkti/–•–ò–•–û/xixo_gorski_plod.jpg'},
      {name:'XIXO Green Fusion -250–º–ª',       price:1.10, img:'snimki/produkti/–•–ò–•–û/xixo_green_fusion.jpg'},
      {name:'XIXO –ö—Ä—É—à–∞ -250–º–ª',              price:1.10, img:'snimki/produkti/–•–ò–•–û/xixo_krusha.jpg'},
      {name:'XIXO –õ–∏–º–æ–Ω -250–º–ª',              price:1.10, img:'snimki/produkti/–•–ò–•–û/xixo_limon.jpg'},
      {name:'XIXO –ú–∞–Ω–≥–æ –∏ –∞–Ω–∞–Ω–∞—Å -250–º–ª',     price:1.10, img:'snimki/produkti/–•–ò–•–û/xixo_mango_and_pineapple.jpg'},
      {name:'XIXO –†–æ–∑–æ–≤–∞ –ª–∏–º–æ–Ω–∞–¥–∞ -250–º–ª',    price:1.10, img:'snimki/produkti/–•–ò–•–û/xixo_pink_lemonade.jpg'},
      {name:'XIXO –ü—Ä–∞—Å–∫–æ–≤–∞ -250–º–ª',           price:1.10, img:'snimki/produkti/–•–ò–•–û/xixo_praskova.jpg'},
      {name:'XIXO –Ø–≥–æ–¥–∞',              price:1.10, img:'snimki/produkti/–•–ò–•–û/xixo_qgoda.jpg'},
      {name:'XIXO Tutti Frutti -250–º–ª',       price:1.10, img:'snimki/produkti/–•–ò–•–û/xixo_tuti_fruity.jpg'}
    ]
  }
};

/* –ü–æ–¥—Ä–µ–¥–±–∞ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏—Ç–µ */
const ORDER = [
  'promocii',
  'burgeri','palachinki','strandzhanki','kartofi','salati','portsii','dobavki',
  'hell','voda','gazirana_voda','fanta','studen_chai','kola',//'sok','xixo','airqn'
];

const sidebar = document.getElementById('sidebar');
const grid    = document.getElementById('productGrid');
const titleEl = document.getElementById('catTitle');

// –î–µ–ª–µ–≥–∏—Ä–∞–Ω –∫–ª–∏–∫ –∑–∞ –±—É—Ç–æ–Ω–∏—Ç–µ "–í—Å–∏—á–∫–æ" (–∑–∞ –≥—Ä—É–ø–∏—Ç–µ veg/sauce)
grid.addEventListener('click', (e) => {
  const btn = e.target.closest('.btn-all');
  if (!btn) return;
  const group = btn.dataset.target;
  const host  = btn.closest('.addons');
  if (!group || !host) return;

  const boxes = [...host.querySelectorAll(`.addon-checkbox[data-group="${group}"]`)];
  if (!boxes.length) return;

  const allChecked = boxes.every(b => b.checked);
  boxes.forEach(b => b.checked = !allChecked);
});


/* –°–∞–π–¥–±–∞—Ä —Ä–µ–Ω–¥–µ—Ä */
sidebar.innerHTML = ORDER.map(key=>{
  const label = (key === 'promocii') ? '–ü–†–û–ú–û–¶–ò–ò' : (CATALOG[key].title);
  const img   = CAT_THUMBS[key];
  return `<a class="cat" data-cat="${key}" role="link" tabindex="0" aria-label="${label}">
            <div class="box" style="background-image:url('${img}')" data-label="${label}"></div>
          </a>`;
}).join('');

/* pretty label –∑–∞ HELL */
function prettyLabel(src){
  let f = src.split('/').pop().split('.')[0].toLowerCase();
  f = f.replace(/^hell_/, '').replace(/^ice_coffe_/, '').replace(/^ice_hell_/, '');
  const map = {
    apple:'Apple', clasic:'Classic', classic:'Black Cherry',
    redgrape:'Red Grape', watermelon:'Watermelon',
    capochino:'Cappuccino', cappuccino:'Cappuccino', caramel:'Salted Caramel',
    coconut:'Coconut', doubleespresso:'Double Espresso', doublespresso:'Double Espresso',
    late:'Latte', latte:'Latte', pinklatte:'Pink Latte',
    vanilia:'Vanilla', vanilla:'Vanilla', distachio:'Pistachio', pistachio:'Pistachio',
    slimvanilla:'Vanilla'
  };
  if (map[f]) return map[f];
  return f.replace(/[_-]+/g,' ').replace(/\b\w/g, m=>m.toUpperCase());
}


/* ===== –ê–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è + —Ä–µ–Ω–¥–µ—Ä ===== */
let current = null;

/* –º–∞–ª—ä–∫ helper –∑–∞ –±–µ–∑–æ–ø–∞—Å–µ–Ω —Ç–µ–∫—Å—Ç –≤ HTML */
const esc = s => String(s)
  .replace(/&/g,'&amp;')
  .replace(/</g,'&lt;')
  .replace(/>/g,'&gt;')
  .replace(/"/g,'&quot;');

function productCardHTML(it, i, withAddons = false) {
  const desc = it.desc ? `<p class="desc">${esc(it.desc)}</p>` : '';

  // ----- –º–æ–±–∏–ª–Ω–æ –∑–∞–≥–ª–∞–≤–∏–µ (—Å–ª–µ–¥ —Å–Ω–∏–º–∫–∞—Ç–∞) -----
  const mobileTitle = `<h3 class="mobile-title">${esc(it.name)}</h3>`;

  // –¥–µ—Å–∫—Ç–æ–ø—Å–∫–∏ –±–ª–æ–∫–æ–≤–µ (–æ—Å—Ç–∞–≤–∞—Ç –∑–∞ ‚â•900px)
  let leftColAfterPhoto = '';
  let actionsRowHTML = '';
  let wholeAddonsBlock = '';

  // –º–æ–±–∏–ª–Ω–∏ –¥–≤–æ–π–Ω–∏—Ü–∏ (‚â§900px) ‚Äì –ø–æ–∫–∞–∑–≤–∞—Ç —Å–µ –≤—ä—Ç—Ä–µ –≤ .pad
  let mobileVeg = '';
  let mobileSauces = '';
  let mobileAddons = '';
  let mobileAddBtn = `
    <button class="mobile-add-btn add-btn"
      data-name="${(it.name || '').replace(/"/g,'&quot;')}"
      data-price="${it.price}"
      data-img="${it.img}">+</button>
  `;

  if (withAddons) {
    if (current === 'burgeri') {
      const isPulled = /–î–™–†–ü–ê–ù–û/i.test(it.name || '');
      const vegList = isPulled
        ? [
            { c:'cheddar', t:'–¢–µ—á–µ–Ω —á–µ–¥—ä—Ä' },
            { c:'bbq',     t:'–ë–∞—Ä–±–µ–∫—é —Å–æ—Å' },
            { c:'car_on',  t:'–ö–∞—Ä–∞–º–µ–ª–∏–∑–∏—Ä–∞–Ω –ª—É–∫' },
            { c:'pickles', t:'–ö–∏—Å–µ–ª–∏ –∫—Ä–∞—Å—Ç–∞–≤–∏—á–∫–∏' },
            { c:'mayo_h',  t:'–î–æ–º–∞—à–Ω–∞ –º–∞–π–æ–Ω–µ–∑–∞' },
            { c:'fries',   t:'–ö–∞—Ä—Ç–æ—Ñ–∫–∏' }
          ]
        : [
            { c:'tomato',   t:'–î–æ–º–∞—Ç' },
            { c:'fries',    t:'–ü—Ä–µ—Å–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∫–∏' },
            { c:'onion',    t:'–ß–µ—Ä–≤–µ–Ω –ª—É–∫' },
            { c:'iceberg',  t:'–ê–π—Å–±–µ—Ä–≥' },
            { c:'razyadka', t:'–†–∞–∑—è–¥–∫–∞' }
          ];
      const sauces = [
        { c:'ketchup', t:'–ö–µ—Ç—á—É–ø' },
        { c:'mayo',    t:'–ú–∞–π–æ–Ω–µ–∑–∞' },
        { c:'mustard', t:'–ì–æ—Ä—á–∏—Ü–∞' },
        { c:'chili',   t:'–õ—é—Ç–æ' }
      ];

      // –¥–µ—Å–∫—Ç–æ–ø—Å–∫–∏ (–ø–æ–¥ —Å–Ω–∏–º–∫–∞—Ç–∞ –∏ –≤–¥—è—Å–Ω–æ –¥–æ –±—É—Ç–æ–Ω–∞)
      leftColAfterPhoto = `
        <div class="addons addons-underimg">
          <div class="hdr">
            –ò–∑–±–µ—Ä–µ—Ç–µ —Å –∫–∞–∫–≤–æ –¥–∞ –±—ä–¥–µ
            <button type="button" class="btn-all" data-target="veg">–í—Å–∏—á–∫–æ</button>
          </div>
          ${vegList.map(x => `
            <label>
              <input type="checkbox" class="addon-checkbox" data-group="veg" data-code="${x.c}" data-price="0"> ${x.t}
            </label>
          `).join('')}
        </div>`;
      actionsRowHTML = `
        <div class="actions-row">
          <div class="addons">
            <div class="hdr">
              –°–æ—Å–æ–≤–µ
              <button type="button" class="btn-all" data-target="sauce">–í—Å–∏—á–∫–æ</button>
            </div>
            ${sauces.map(x => `
              <label>
                <input type="checkbox" class="addon-checkbox" data-group="sauce" data-code="${x.c}" data-price="0"> ${x.t}
              </label>
            `).join('')}
          </div>
          <button class="add-btn"
            data-name="${(it.name || '').replace(/"/g,'&quot;')}"
            data-price="${it.price}"
            data-img="${it.img}">+</button>
        </div>`;

      // –º–æ–±–∏–ª–Ω–∏ –¥–≤–æ–π–Ω–∏—Ü–∏ (–≤ .pad, 1 –ø–æ–¥ –¥—Ä—É–≥–æ)
      mobileVeg = `
        <div class="mobile-veg">
          <div class="hdr">
            –ò–∑–±–µ—Ä–µ—Ç–µ —Å –∫–∞–∫–≤–æ –¥–∞ –±—ä–¥–µ
            <button type="button" class="btn-all" data-target="veg">–í—Å–∏—á–∫–æ</button>
          </div>
          ${vegList.map(x => `
            <label>
              <input type="checkbox" class="addon-checkbox" data-group="veg" data-code="${x.c}" data-price="0"> ${x.t}
            </label>
          `).join('')}
        </div>`;
      mobileSauces = `
        <div class="mobile-sauces">
          <div class="hdr">
            –°–æ—Å–æ–≤–µ
            <button type="button" class="btn-all" data-target="sauce">–í—Å–∏—á–∫–æ</button>
          </div>
          ${sauces.map(x => `
            <label>
              <input type="checkbox" class="addon-checkbox" data-group="sauce" data-code="${x.c}" data-price="0"> ${x.t}
            </label>
          `).join('')}
        </div>`;
    } else if (current === 'portsii') {
      // –¥–µ—Å–∫—Ç–æ–ø
      wholeAddonsBlock = `
        <div class="actions-row">
          <div class="addons">
            <div class="hdr">–î–æ–±–∞–≤–∫–∏</div>
            <label><input type="checkbox" class="addon-checkbox" data-code="pitka" data-price="1.5"> + –ü–∏—Ç–∫–∞</label>
            <label><input type="checkbox" class="addon-checkbox" data-code="raz" data-price="1.5"> + –†–∞–∑—è–¥–∫–∞ 100 –≥—Ä</label>
          </div>
          <button class="add-btn"
            data-name="${(it.name || '').replace(/"/g,'&quot;')}"
            data-price="${it.price}"
            data-img="${it.img}">+</button>
        </div>`;
      // –º–æ–±–∏–ª–Ω–æ
      mobileAddons = `
        <div class="mobile-addons">
          <div class="hdr">–î–æ–±–∞–≤–∫–∏</div>
          <label><input type="checkbox" class="addon-checkbox" data-code="pitka" data-price="1.5"> + –ü–∏—Ç–∫–∞</label>
          <label><input type="checkbox" class="addon-checkbox" data-code="raz" data-price="1.5"> + –†–∞–∑—è–¥–∫–∞ 100 –≥—Ä</label>
        </div>`;
    } else if (current === 'strandzhanki') {
      // –¥–µ—Å–∫—Ç–æ–ø
      wholeAddonsBlock = `
        <div class="actions-row">
          <div class="addons">
            <div class="hdr">
              –°–æ—Å–æ–≤–µ
              <button type="button" class="btn-all" data-target="sauce">–í—Å–∏—á–∫–æ</button>
            </div>
            <label><input type="checkbox" class="addon-checkbox" data-group="sauce" data-code="ketchup" data-price="0"> –ö–µ—Ç—á—É–ø</label>
            <label><input type="checkbox" class="addon-checkbox" data-group="sauce" data-code="mayo"    data-price="0"> –ú–∞–π–æ–Ω–µ–∑–∞</label>
            <label><input type="checkbox" class="addon-checkbox" data-group="sauce" data-code="mustard" data-price="0"> –ì–æ—Ä—á–∏—Ü–∞</label>
            <label><input type="checkbox" class="addon-checkbox" data-group="sauce" data-code="chili"   data-price="0"> –õ—é—Ç–æ</label>
          </div>
          <button class="add-btn"
            data-name="${(it.name || '').replace(/"/g,'&quot;')}"
            data-price="${it.price}"
            data-img="${it.img}">+</button>
        </div>`;
      // –º–æ–±–∏–ª–Ω–æ
      mobileSauces = `
        <div class="mobile-sauces">
          <div class="hdr">
            –°–æ—Å–æ–≤–µ
            <button type="button" class="btn-all" data-target="sauce">–í—Å–∏—á–∫–æ</button>
          </div>
          <label><input type="checkbox" class="addon-checkbox" data-group="sauce" data-code="ketchup" data-price="0"> –ö–µ—Ç—á—É–ø</label>
          <label><input type="checkbox" class="addon-checkbox" data-group="sauce" data-code="mayo"    data-price="0"> –ú–∞–π–æ–Ω–µ–∑–∞</label>
          <label><input type="checkbox" class="addon-checkbox" data-group="sauce" data-code="mustard" data-price="0"> –ì–æ—Ä—á–∏—Ü–∞</label>
          <label><input type="checkbox" class="addon-checkbox" data-group="sauce" data-code="chili"   data-price="0"> –õ—é—Ç–æ</label>
        </div>`;
    }
  }

  return `
    <article class="product ${i % 2 ? 'even' : ''}">
      <div class="leftcol">
        <div class="photo" style="background-image:url('${it.img}')"></div>
        ${mobileTitle}            <!-- –º–æ–±–∏–ª–Ω–æ –∏–º–µ –ø–æ–¥ —Å–Ω–∏–º–∫–∞—Ç–∞ -->
        ${leftColAfterPhoto}      <!-- –¥–µ—Å–∫—Ç–æ–ø –¥–æ–±–∞–≤–∫–∏ –ø–æ–¥ —Å–Ω–∏–º–∫–∞—Ç–∞ -->
      </div>

      <div class="pad">
        <h3 class="title">${esc(it.name)}</h3>
        ${desc}

        ${mobileVeg}              <!-- –º–æ–±–∏–ª–Ω–æ ‚Äû–ò–∑–±–µ—Ä–µ—Ç–µ‚Ä¶‚Äú -->
        ${mobileSauces}           <!-- –º–æ–±–∏–ª–Ω–æ ‚Äû–°–æ—Å–æ–≤–µ‚Äú -->
        ${mobileAddons}           <!-- –º–æ–±–∏–ª–Ω–∏ ‚Äû–î–æ–±–∞–≤–∫–∏‚Äú (–ø–æ—Ä—Ü–∏–∏) -->

        <div class="price-badge">
          <div class="lv">${fmtLv(it.price)}</div>
          <div class="eur">${fmtEur(it.price)}</div>
        </div>

        ${
          current === 'burgeri'
            ? actionsRowHTML
            : (wholeAddonsBlock || `
                <button class="add-btn"
                  data-name="${(it.name || '').replace(/"/g,'&quot;')}"
                  data-price="${it.price}"
                  data-img="${it.img}">+</button>
              `)
        }

        ${mobileAddBtn}           <!-- –º–æ–±–∏–ª–µ–Ω –±—É—Ç–æ–Ω –Ω–∞–π-–¥–æ–ª—É -->
      </div>
    </article>`;
}

// --- –£–≤–µ–ª–∏—á–∞–≤–∞–Ω–µ –ø—Ä–∏ –¥–≤–æ–µ–Ω –∫–ª–∏–∫ (desktop) ---
document.addEventListener('dblclick', e => {
  const imgEl = e.target.closest('.photo');
  if (!imgEl) return;

  const alreadyZoomed = imgEl.classList.contains('zoomed');
  document.querySelectorAll('.photo.zoomed').forEach(el => el.classList.remove('zoomed'));

  if (alreadyZoomed) {
    document.body.style.overflow = '';
  } else {
    imgEl.classList.add('zoomed');
    document.body.style.overflow = 'hidden';
  }
});

// --- Double-tap –∑–∞ –º–æ–±–∏–ª–Ω–∏ ---
document.addEventListener('touchend', (e) => {
  const imgEl = e.target.closest('.photo');
  if (!imgEl) return;

  const now = Date.now();
  const last = imgEl._lastTap || 0;

  if (now - last < 280) {
    const already = imgEl.classList.contains('zoomed');
    document.querySelectorAll('.photo.zoomed').forEach(el => el.classList.remove('zoomed'));
    if (!already) {
      imgEl.classList.add('zoomed');
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = '';
    }
    imgEl._lastTap = 0;
  } else {
    imgEl._lastTap = now;
  }
}, { passive: true });

const catHasAddons = cat => (cat === 'portsii' || cat === 'burgeri' || cat === 'strandzhanki');


function activate(cat, {fromNav=false, replace=false} = {}){

/* üß° –ü–†–û–ú–û–¶–ò–ò ‚Äî –í–ì–†–ê–î–ï–ù–û (–±–µ–∑ iframe) */
if (cat === 'promocii'){
  current = 'promocii';
  sidebar.querySelectorAll('.cat')
    .forEach(c=>c.classList.toggle('active', c.dataset.cat==='promocii'));

  const url = new URL(location.href);
  if (url.searchParams.get('cat') !== 'promocii'){
    url.searchParams.set('cat','promocii');
    if (replace) history.replaceState({cat:'promocii'}, '', url);
    else if (fromNav) history.pushState({cat:'promocii'}, '', url);
  }

  titleEl.textContent = '–ü–†–û–ú–û–¶–ò–ò';
  grid.innerHTML = `
    <section class="promo-wrap">
      <h2 class="promo-head">üî• Corner BBQ ‚Äî –ü—Ä–æ–º–æ—Ü–∏–∏</h2>

      <!-- –±—É—Ç–æ–Ω–∏ –∑–∞ –∞–¥–º–∏–Ω –∏ –∫–∞—Ç–∞–ª–æ–≥ -->
<div style="display:flex; gap:8px; margin:0 0 12px;">
  <button id="adminBtn" class="promo-btn">Admin</button>
  <button id="catalogBtn" class="promo-btn" style="display:none">–ö–∞—Ç–∞–ª–æ–≥</button>
</div>


      <!-- —Å–ø–∏—Å—ä–∫ —Å –ø—Ä–æ–º–æ –∫–∞—Ä—Ç–∏—Ç–µ -->
      <div id="promoList" class="promo-grid" role="list"></div>

      <!-- Builder (—Å–∫—Ä–∏—Ç –ø–æ –Ω–∞—á–∞–ª–æ) -->
      <section id="builder" class="builder" aria-hidden="true" style="display:none">
        <div class="builder-head">
          <strong>–°—ä–∑–¥–∞–π –ø—Ä–æ–º–æ –ø–∞–∫–µ—Ç</strong>
          <span class="hint">–ü–ª—ä–∑–Ω–∏ A + B –æ—Ç –∫–∞—Ç–∞–ª–æ–≥–∞ ‚Üí –≤—ä–≤–µ–¥–∏ —Ü–µ–Ω–∞ ‚Üí ‚Äû–ó–∞–ø–∞–∑–∏‚Äú.</span>
        </div>
        <div class="rows" id="rows"></div>
        <div class="actions">
          <button class="btn" id="addRow">+ –†–µ–¥</button>
          <button class="btn" id="save">–ó–∞–ø–∞–∑–∏</button>
        </div>
      </section>

      <!-- –¥–µ—Å–µ–Ω slide-in –∫–∞—Ç–∞–ª–æ–≥ -->
      <aside id="slide" class="slide" aria-hidden="true">
        <div class="slide-head">
          <button class="btn" id="backBtn" title="–ù–∞–∑–∞–¥" style="display:none">‚Üê –ù–∞–∑–∞–¥</button>
          <strong id="slideTitle" style="margin-left:6px">–ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ç–∏</strong>
          <button class="btn" id="closeSlide">‚úï</button>
        </div>
        <input id="search" class="slide-search" placeholder="–¢—ä—Ä—Å–∏‚Ä¶ (–∏–º–µ/–æ–ø–∏—Å–∞–Ω–∏–µ)">
        <div id="catalog" class="catalog"></div>
      </aside>
    </section>
  `;

  // —Å—Ç–∞—Ä—Ç–∏—Ä–∞–π –ø—Ä–æ–º–æ –º–æ–¥—É–ª–∞ (–∏–ª–∏ –º–∞—Ä–∫–∏—Ä–∞–π –¥–∞ —Å–µ —Å—Ç–∞—Ä—Ç–∏—Ä–∞, –∞–∫–æ –æ—â–µ –Ω–µ –µ –¥–µ—Ñ–∏–Ω–∏—Ä–∞–Ω)
  if (typeof window.initPromotionsInline === 'function') {
    window.initPromotionsInline();
  } else {
    window.__needPromoInit = true;
  }

  recalcMobileOffsets();
  return;
}


  const exists = !!CATALOG[cat];
  if(!exists) cat = 'burgeri';
  current = cat;

  sidebar.querySelectorAll('.cat').forEach(c=>c.classList.toggle('active', c.dataset.cat===cat));
  titleEl.textContent = CATALOG[cat]?.title || cat.toUpperCase();

  const url2 = new URL(location.href);
  if (url2.searchParams.get('cat') !== cat) {
    url2.searchParams.set('cat', cat);
    if (replace) history.replaceState({cat}, '', url2);
    else if (fromNav) history.pushState({cat}, '', url2);
  }

  const data = CATALOG[cat];

  if (data.view === 'water2') {
    grid.innerHTML = `
      <div class="water-wrapper">
        ${data.groups.map(g=>`
          <section class="water-block">
            <h2>${g.heading}</h2>
            <div class="water-grid">
              ${g.pair.map(p=>`
                <div class="water-card">
                  <img src="${p.src}" alt="${p.label}">
                  <div class="water-name">${p.label}</div>
                  ${typeof p.price === 'number' ? `
                    <div class="price-badge">
                      <div class="lv">${fmtLv(p.price)}</div>
                      <div class="eur">${fmtEur(p.price)}</div>
                    </div>
                    <button class="add-btn" data-name="${p.label.replace(/"/g,'&quot;')}" data-price="${p.price}" data-img="${p.src}">+</button>
                  ` : ``}
                </div>
              `).join('')}
            </div>
          </section>
        `).join('')}
      </div>
    `;
    bindAddButtons();
    recalcMobileOffsets();
    return;
  }

  if (data.view === 'gallery') {
    const hellPrice = data.hellPrice ?? 2.00;
    grid.innerHTML = data.groups.map(group=>{
      const pics = group.images.map(src=>{
        const label = prettyLabel(src);
        return `
        <div>
          <div class="tile">
            <img src="${src}" alt="${label}">
            <div class="price-badge">
              <div class="lv">${fmtLv(hellPrice)}</div>
              <div class="eur">${fmtEur(hellPrice)}</div>
            </div>
            <button class="add-btn" data-name="${label.replace(/"/g,'&quot;')}" data-price="${hellPrice}" data-img="${src}">+</button>
          </div>
          <div class="caption">${label}</div>
        </div>`;
      }).join('');
      return `
        <h2 class="sec-title">${group.heading}</h2>
        <div class="gallery">${pics}</div>
      `;
    }).join('');
    bindAddButtons();
    recalcMobileOffsets();
    return;
  }

  if (data.groups && Array.isArray(data.groups)) {
    const groupsHTML = data.groups.map(group => `
      <h2 class="sec-title">${group.heading}</h2>
      <div class="grid-products">
       ${group.items?.map((it,i)=> productCardHTML(it,i, catHasAddons(current))).join('')}
      </div>
    `).join('');
    grid.innerHTML = groupsHTML;
    bindAddButtons();
    recalcMobileOffsets();
    return;
  }


  const items = (data?.items)||[];
  if (items.length === 0) {
    grid.innerHTML = `<p style="padding:16px;font-weight:700">–ù—è–º–∞ –ø—Ä–æ–¥—É–∫—Ç–∏ –≤ —Ç–∞–∑–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è.</p>`;
    recalcMobileOffsets();
    return;
  }
grid.innerHTML = `
  <div class="grid-products">
    ${items.map((it,i)=> productCardHTML(it,i, catHasAddons(current))).join('')}
  </div>
`;

  bindAddButtons();
  recalcMobileOffsets();
}

// ‚¨áÔ∏è –ì–õ–û–ë–ê–õ–ù–û ‚Äì –Ω–∞–¥ bindAddButtons
function groupPhrase(card, group, kind){
  if (!card) return '';
  const all = [...card.querySelectorAll(`.addon-checkbox[data-group="${group}"]`)];
  if (!all.length) return '';

  const labelOf = (b) => (b.closest('label')?.textContent || '')
                          .trim()
                          .replace(/^\+\s*/, '');

  const allNames = all.map(labelOf);
  const sel      = all.filter(b => b.checked);
  const selNames = sel.map(labelOf);

  if (sel.length === all.length && sel.length > 0) {
    return kind === 'veg' ? '—Å –≤—Å–∏—á–∫–æ' : '–≤—Å–∏—á–∫–∏ —Å–æ—Å–æ–≤–µ';
  }
  if (sel.length > 0) {
    const missing = allNames.filter(n => !selNames.includes(n));
    const base = kind === 'veg' ? '–≤—Å–∏—á–∫–æ –±–µ–∑ ‚Äî ' : '–≤—Å–∏—á–∫–∏ —Å–æ—Å–æ–≤–µ –±–µ–∑ ‚Äî ';
    return base + (missing.length ? missing.join(', ') : '(–Ω–∏—â–æ)');
  }
  return '';
}




/* –î–æ–±–∞–≤—è–Ω–µ ‚Äì —Å–ª—É—à–∞—Ç–µ–ª–∏ */
function bindAddButtons(){
  grid.querySelectorAll('.add-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const card = btn.closest('.product');
      const baseName  = btn.getAttribute('data-name');
      const basePrice = Number(btn.getAttribute('data-price')) || 0;
      const img       = btn.getAttribute('data-img') || '';

const checks = card ? [...card.querySelectorAll('.addon-checkbox:checked')] : [];
const addons = checks.map(ch => {
  const code  = ch.getAttribute('data-code');
  const def   = ADDONS[code] || {};
  const price = Number(ch.getAttribute('data-price')) || def.price || 0;

  // –≤–∑–∏–º–∞–º–µ —Ä–µ–∞–ª–Ω–∏—è —Ç–µ–∫—Å—Ç –æ—Ç <label>, –∞–∫–æ –∏–º–∞ —Ç–∞–∫—ä–≤; –∏–Ω–∞—á–µ –æ—Ç ADDONS
  const labelFromDOM = (ch.closest('label')?.textContent || '').trim();
  const labelClean = (labelFromDOM || def.label || '–î–æ–±–∞–≤–∫–∞')
                      .replace(/^\+\s*/, ''); // –º–∞—Ö–Ω–∏ –≤–æ–¥–µ—â–æ ‚Äú+ ‚Äù –∞–∫–æ –∏–º–∞

  return { code, label: labelClean, price };
});


      const addonsTotal = addons.reduce((s,a)=>s+a.price,0);
      const fullPrice   = basePrice + addonsTotal;

      const nameWithAddons = addons.length
        ? `${baseName} (+ ${addons.map(a=>a.label).join(', ')})`
        : baseName;

      addToCart({
        _id: Date.now()+''+Math.random(),
        name: nameWithAddons,
        baseName,
        price: fullPrice,
        basePrice,
        addons,
        img
      });

// ‚úèÔ∏è –ë–µ–ª–µ–∂–∫–∞ –∑–∞ —Ç–∞–∑–∏ –∫–∞—Ä—Ç–∞: "—Å –≤—Å–∏—á–∫–æ"/"–≤—Å–∏—á–∫–æ –±–µ–∑ ‚Äî ‚Ä¶" + "–≤—Å–∏—á–∫–∏ —Å–æ—Å–æ–≤–µ ‚Ä¶"
const vegLine   = card ? groupPhrase(card, 'veg',   'veg')   : '';
const sauceLine = card ? groupPhrase(card, 'sauce', 'sauce') : '';

const parts = [vegLine, sauceLine].filter(Boolean);
if (parts.length) {
  const line = `${baseName}: ${parts.join('; ')}`;
  const cur  = (orderNoteEl.value || '').trim();
  orderNoteEl.value = cur ? (cur + '\n' + line) : line;
  localStorage.setItem(LS_ORDER_NOTE, orderNoteEl.value);
}

      btn.textContent = '‚úì';
      setTimeout(()=> btn.textContent = '+', 450);

      checks.forEach(ch => ch.checked = false);
    });
  });
}


/* POP DELAY –≤ —Å–∞–π–¥–±–∞—Ä–∞ */
const POP_DELAY = 100; // ms
function shouldBypassDelay(evt){ return evt.metaKey || evt.ctrlKey || evt.shiftKey || evt.altKey || evt.button === 1; }
function popThenActivate(el, key){
  el.classList.remove('is-pressed'); el.classList.add('is-popping'); el.dataset.locked = '1';
  setTimeout(()=>{ activate(key, {fromNav:true}); el.classList.remove('is-popping'); delete el.dataset.locked; }, POP_DELAY);
}

/* –ß–µ—Ç–∏ cat –æ—Ç URL –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ */
function initFromURL(){
  const params = new URLSearchParams(location.search);
  const cat = params.get('cat') || 'burgeri';
  activate(cat, {replace:true});
}
initFromURL();

/* –í—ä–∑—Å—Ç–∞–Ω–æ–≤–∏ –∫–æ–ª–∏—á–∫–∞—Ç–∞ –ø—Ä–∏ –ø—ä—Ä–≤–æ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ */
restoreCartFromLS();
restoreOrderNote();

/* –°—ä–±–∏—Ç–∏—è –∑–∞ —Å–∞–π–¥–±–∞—Ä –∫–∞—Ä—Ç–∏—Ç–µ */
sidebar.querySelectorAll('.cat').forEach(catEl=>{
  const key = catEl.dataset.cat;
  catEl.addEventListener('touchstart', ()=>{ 
    catEl.classList.add('is-pressed'); 
    setTimeout(()=>catEl.classList.remove('is-pressed'), 120); 
  }, {passive:true});
  catEl.addEventListener('mousedown', ()=>catEl.classList.add('is-pressed'));
  catEl.addEventListener('mouseleave', ()=>catEl.classList.remove('is-pressed'));
  catEl.addEventListener('mouseup',   ()=>catEl.classList.remove('is-pressed'));
  catEl.addEventListener('click', (e)=>{
    if (shouldBypassDelay(e)) return;
    e.preventDefault();
    if (catEl.dataset.locked==='1' || key===current) return;
    popThenActivate(catEl, key);
  });
  catEl.addEventListener('keydown', (e)=>{
    if (e.key==='Enter' || e.key===' '){
      e.preventDefault();
      if (catEl.dataset.locked==='1' || key===current) return;
      popThenActivate(catEl, key);
    }
  });
});

/* Back/Forward */
addEventListener('popstate', (e)=>{
  const cat = (e.state && e.state.cat) || new URLSearchParams(location.search).get('cat') || 'burgeri';
  activate(cat, {replace:true});
});

/* –ü–æ—á–∏—Å—Ç–≤–∞–Ω–µ –Ω–∞ –∫–ª–∞—Å–æ–≤–µ –ø—Ä–∏ pageshow */
addEventListener('pageshow', ()=>{
  sidebar.querySelectorAll('.cat').forEach(c=>{ c.classList.remove('is-pressed','is-popping'); delete c.dataset.locked; });
});

/* –ü–ª–∞–≤–∞—â–æ –¥–≤–∏–∂–µ–Ω–∏–µ –Ω–∞ –±—É—Ç–æ–Ω–∞ ‚Äû–ù–∞—á–∞–ª–æ‚Äú */
(function(){
  const home = document.querySelector('.home-pill');
  const content = document.querySelector('.content');
  if(!home || !content) return;

  const TOP = 16, BOTTOM_MARGIN = 16, SPEED = 0.25;
  let cur = 0, target = 0, rafId = 0;

  function maxShift(){ return Math.max(0, window.innerHeight - TOP - BOTTOM_MARGIN - home.offsetHeight); }
  function updateLeft(){
    const rect = content.getBoundingClientRect();
    home.style.left = (rect.left + 20) + 'px';
  }
  function onScroll(){
    const doc = document.documentElement;
    const scrollMax = Math.max(1, doc.scrollHeight - window.innerHeight);
    const progress = window.scrollY / scrollMax;
    target = progress * maxShift();
    if(!rafId) rafId = requestAnimationFrame(tick);
  }
  function tick(){
    rafId = 0;
    cur += (target - cur) * SPEED;
    home.style.transform = `translateY(${cur.toFixed(2)}px)`;
    if (Math.abs(target - cur) > 0.5) rafId = requestAnimationFrame(tick);
  }
  addEventListener('scroll', onScroll, {passive:true});
  addEventListener('resize', ()=>{ updateLeft(); onScroll(); });
  updateLeft(); onScroll();
})();

/* HOME —Å–ø–æ—Ä–µ–¥ —Å—Ä–µ–¥–∞—Ç–∞ */
(function(){
  const home = document.querySelector('.home-pill');
  if (!home) return;
  const HOME_LOCAL = 'file:///E:/BBQ_SITE/index.html';
  const HOME_WEB   = 'index.html';
  home.addEventListener('click', function(e){
    if (e.ctrlKey || e.metaKey || e.shiftKey || e.altKey || e.button === 1) return;
    e.preventDefault();
    const target = (location.protocol === 'file:') ? HOME_LOCAL : HOME_WEB;
    window.location.href = target;
  });
})();

/* ===== –î–ò–ù–ê–ú–ò–ß–ù–ò –û–§–°–ï–¢–ò (–º–æ–±–∏–ª–µ–Ω) ===== */
function recalcMobileOffsets(){
  const isMobile = window.matchMedia('(max-width: 900px)').matches;
  if(!isMobile) return;

  const cart = document.getElementById('cartBtn');
  const sb = document.querySelector('.sidebar');

  const cartH = cart ? Math.ceil(cart.offsetHeight) + 12 : 54;
  const sbH = sb ? Math.ceil(sb.getBoundingClientRect().height) : 100;

  document.documentElement.style.setProperty('--mobile-cart-h', cartH + 'px');
  document.documentElement.style.setProperty('--mobile-sidebar-h', sbH + 'px');
}
addEventListener('load', recalcMobileOffsets);
addEventListener('resize', recalcMobileOffsets);
addEventListener('orientationchange', recalcMobileOffsets);

const sbObserver = new MutationObserver(()=>recalcMobileOffsets());
sbObserver.observe(document.getElementById('sidebar'), { childList:true, subtree:true });

let lastScrollY = window.scrollY;
let ticking = false;
function handleScrollHideSidebar() {
  const sidebar = document.querySelector('.sidebar');
  if (!sidebar) return;

  const currentY = window.scrollY;
  if (currentY > lastScrollY + 10) { sidebar.classList.add('hide-on-scroll'); }
  else if (currentY < lastScrollY - 10) { sidebar.classList.remove('hide-on-scroll'); }

  lastScrollY = currentY;
  ticking = false;
}
window.addEventListener('scroll', () => {
  if (!ticking) {
    window.requestAnimationFrame(handleScrollHideSidebar);
    ticking = true;
  }
});


/* 1) Lazy-load –Ω–∞ Firebase v8 RTDB */
const __firebaseSdkReady = (() => {
  let ready;
  return function ensure() {
    if (ready) return ready;
    ready = new Promise(resolve => {
      if (window.firebase?.database) return resolve();
      const s1 = document.createElement('script');
      const s2 = document.createElement('script');
      s1.src = 'https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js';
      s2.src = 'https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js';
      s1.onload = () => document.head.appendChild(s2);
      s2.onload = () => resolve();
      document.head.appendChild(s1);
    });
    return ready;
  };
})();

/* 2) –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚Äî –±–µ–∑ –¥–∏—Ä–µ–∫—Ç–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç—É–∫ */
window.__FIREBASE_CONFIG__ = {
  apiKey: "AIzaSyAhaEPIEODEoRiwTulBw4W9YTXyMW9sqKg",
  authDomain: "corner-bbq.firebaseapp.com",
  databaseURL: "https://corner-bbq-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "corner-bbq",
  storageBucket: "corner-bbq.firebasestorage.app",
  messagingSenderId: "878314744141",
  appId: "1:878314744141:web:f869886ee4380e9dbcaf04",
  measurementId: "G-FWBDL96GN0"
};

/* 3) –ü–æ–º–æ—â–Ω–∞: –∞–¥–º–∏–Ω —Ñ–ª–∞–≥ */
function isAdminBBQ(){
  const urlFlag = /\badmin=1\b/.test(location.search + location.hash);
  const lsFlag  = !!(localStorage.getItem('adminName')||'').trim()
               || localStorage.getItem('isAdmin') === '1';
  return urlFlag || lsFlag;
}
/* 4) –û—Å–Ω–æ–≤–µ–Ω –º–æ–¥—É–ª (–≤–≥—Ä–∞–¥–µ–Ω Promos + Admin unlock + Catalog drag&drop) */
window.initPromotionsInline = async function () {
  await __firebaseSdkReady();

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ Firebase (–±–µ–∑ –¥—É–±–ª–∏—Ä–∞–Ω–µ)
  if (!window.firebase?.apps?.length) {
    if (window.__FIREBASE_CONFIG__) {
      firebase.initializeApp(window.__FIREBASE_CONFIG__);
    } else {
      console.warn('‚ö†Ô∏è –õ–∏–ø—Å–≤–∞ window.__FIREBASE_CONFIG__.');
      return;
    }
  }

  /* ===== DOM ===== */
  const listEl     = document.getElementById('promoList');
  const builder    = document.getElementById('builder');
  const rowsWrap   = document.getElementById('rows');
  const addRowBtn  = document.getElementById('addRow');
  const saveBtn    = document.getElementById('save');

  const adminBtn   = document.getElementById('adminBtn');
  const catalogBtn = document.getElementById('catalogBtn');
  const slide      = document.getElementById('slide');
  const catalogEl  = document.getElementById('catalog');
  const searchEl   = document.getElementById('search');
  const backBtn    = document.getElementById('backBtn');
  const slideTitle = document.getElementById('slideTitle');
  const closeSlide = document.getElementById('closeSlide');

  /* ===== Helpers ===== */
  const ADMIN_PASS = 'bbqcornera123';
  const money = (n)=> (Number(n||0).toFixed(2)+' –ª–≤');
  const el = (tag, props={}, ...children)=>{
    const x=document.createElement(tag); Object.assign(x, props);
    for(const c of children){ typeof c==='string' ? x.appendChild(document.createTextNode(c)) : c && x.appendChild(c); }
    return x;
  };
  const safe = s => String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
  const genId = ()=> 'p_'+Date.now().toString(36)+'_'+Math.random().toString(36).slice(2,8);

  let rows = [];                    // [{A,B,price}]
  let view = 'cats', currentKey=null;

  // –ø–æ–∫–∞–∑–≤–∞–π/–∫—Ä–∏–∏ delete –•
  function toggleDeleteButtons(){
    listEl?.querySelectorAll('.promo-del').forEach(btn=>{
      btn.style.display = isAdmin ? 'inline-block' : 'none';
    });
  }

  /* ===== –ö–∞—Ç–∞–ª–æ–≥ (–ø–æ–ª–∑–≤–∞ —Ç–≤–æ—è –≥–ª–æ–±–∞–ª–µ–Ω CATALOG) ===== */
  const CAT_ORDER = [
    'burgeri','palachinki','strandzhanki','kartofi','salati','portsii','dobavki',
    'hell','voda','gazirana_voda','fanta','studen_chai','kola','sok','xixo','airqn'
  ];
  const CAT_TITLES = Object.fromEntries(Object.entries(CATALOG).map(([k,v])=>[k, v.title || k.toUpperCase()]));

  function prettyLabel(src){
    let f = src.split('/').pop().split('.')[0].toLowerCase();
    f = f.replace(/^hell_/,'').replace(/^ice_coffe_/,'').replace(/^ice_hell_/,'');
    const map = {apple:'Apple', clasic:'Classic', classic:'Black Cherry', redgrape:'Red Grape',
      watermelon:'Watermelon', capochino:'Cappuccino', cappuccino:'Cappuccino',
      caramel:'Salted Caramel', coconut:'Coconut', doubleespresso:'Double Espresso',
      doublespresso:'Double Espresso', late:'Latte', latte:'Latte', pinklatte:'Pink Latte',
      vanilia:'Vanilla', vanilla:'Vanilla', distachio:'Pistachio', pistachio:'Pistachio', slimvanilla:'Vanilla'};
    if(map[f]) return map[f];
    return f.replace(/[_-]+/g,' ').replace(/\b\w/g,m=>m.toUpperCase());
  }
  function makeDragPayload(p, category){
    return JSON.stringify({
      name: p.name || p.label || prettyLabel(p.src||''),
      desc: p.desc || '',
      price: Number(p.price||0),
      image: p.img || p.image || p.src || '/bbqsaitlogo.jpg',
      category: category || ''
    });
  }

  function openSlide(){ slide.classList.add('open'); renderCategories(); }
  function renderCategories(){
    view='cats'; currentKey=null; slideTitle.textContent='–ö–∞—Ç–∞–ª–æ–≥ ¬∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏'; backBtn.style.display='none';
    catalogEl.innerHTML=''; catalogEl.appendChild(el('div',{className:'s-title'},'–ö–∞—Ç–µ–≥–æ—Ä–∏–∏'));
    CAT_ORDER.forEach(key=>{
      const label = CAT_TITLES[key] || key.toUpperCase();
      const img = (window.CAT_THUMBS && CAT_THUMBS[key]) || '/bbqsaitlogo.jpg';
      const card = el('div',{className:'s-cat'},
        el('img',{src:img,alt:label,loading:'lazy'}),
        el('div',{}, el('div',{className:'nm'},label), el('div',{className:'ds'},'–û—Ç–≤–æ—Ä–∏ –ø—Ä–æ–¥—É–∫—Ç–∏'))
      );
      card.addEventListener('click',()=>renderCategory(key));
      catalogEl.appendChild(card);
    });
  }
  function renderCategory(key){
    const data = CATALOG[key]; currentKey=key; view='cat';
    slideTitle.textContent = '–ö–∞—Ç–∞–ª–æ–≥ ¬∑ '+(data?.title || CAT_TITLES[key] || key.toUpperCase());
    backBtn.style.display=''; catalogEl.innerHTML='';

    if(data?.view==='water2'){
      data.groups.forEach(g=>{
        catalogEl.appendChild(el('div',{className:'s-title'}, g.heading));
        const wrap = el('div',{className:'s-water'});
        g.pair.forEach(p=>{
          const card = el('div',{className:'s-wcard', draggable:true},
            el('img',{src:p.src, alt:p.label}),
            el('div',{className:'s-wname'}, p.label),
            el('div',{className:'s-wprice'}, money(p.price))
          );
          card.addEventListener('dragstart', e=> e.dataTransfer.setData('application/json', makeDragPayload({name:p.label, price:p.price, img:p.src}, data.title)));
          wrap.appendChild(card);
        });
        catalogEl.appendChild(wrap);
      });
      return;
    }
    if(data?.view==='gallery'){
      data.groups.forEach(g=>{
        catalogEl.appendChild(el('div',{className:'s-title'}, g.heading));
        const grid = el('div',{className:'s-gallery'});
        const price = data.hellPrice ?? 2.00;
        g.images.forEach(src=>{
          const label = prettyLabel(src);
          const tile = el('div',{className:'s-tile', draggable:true, title:label},
            el('img',{src,alt:label}),
            el('div',{className:'s-price'}, money(price)),
            el('div',{className:'s-cap'}, label)
          );
          tile.addEventListener('dragstart', e=> e.dataTransfer.setData('application/json', makeDragPayload({name:label, price, img:src}, data.title)));
          grid.appendChild(tile);
        });
        catalogEl.appendChild(grid);
      });
      return;
    }
    const groups = data.groups;
    if (Array.isArray(groups)) {
      groups.forEach(g=>{
        catalogEl.appendChild(el('div',{className:'s-title'}, g.heading));
        g.items.forEach(p=>{
          const card = el('div',{className:'s-card', draggable:true},
            el('img',{src:p.img||'/bbqsaitlogo.jpg', alt:p.name}),
            el('div',{className:'nm'}, p.name),
            el('div',{className:'pr'}, money(p.price||0))
          );
          card.addEventListener('dragstart', e=> e.dataTransfer.setData('application/json', makeDragPayload(p, data.title)));
          catalogEl.appendChild(card);
        });
      });
      return;
    }
    (data.items||[]).forEach(p=>{
      const card = el('div',{className:'s-card', draggable:true},
        el('img',{src:p.img||'/bbqsaitlogo.jpg', alt:p.name}),
        el('div',{className:'nm'}, p.name),
        el('div',{className:'pr'}, money(p.price||0))
      );
      card.addEventListener('dragstart', e=> e.dataTransfer.setData('application/json', makeDragPayload(p, data.title)));
      catalogEl.appendChild(card);
    });
  }
  searchEl?.addEventListener('input', ()=>{
    const q = (searchEl.value||'').trim().toLowerCase();
    if(!q){ if(currentKey) renderCategory(currentKey); else renderCategories(); return; }
    const out=[]; const data=currentKey?CATALOG[currentKey]:null;
    if(!currentKey){ // –≥–ª–æ–±–∞–ª–Ω–æ —Ç—ä—Ä—Å–µ–Ω–µ –ø–æ –≤—Å–∏—á–∫–∏
      Object.keys(CATALOG).forEach(k=>{
        const d=CATALOG[k]; const collect=(arr)=>arr.forEach(p=>{ if((p.name||'').toLowerCase().includes(q)) out.push(p); });
        if(d.view==='gallery'){
          const price=d.hellPrice??2.00;
          d.groups.forEach(g=>g.images.forEach(src=>{
            const name=prettyLabel(src); if(name.toLowerCase().includes(q)) out.push({name, price, img:src});
          }));
        }else if(d.view==='water2'){
          d.groups.forEach(g=>g.pair.forEach(p=>{ if(p.label.toLowerCase().includes(q)) out.push({name:p.label, price:p.price, img:p.src}); }));
        }else if(Array.isArray(d.groups)){ d.groups.forEach(g=>collect(g.items||[])); }
        else collect(d.items||[]);
      });
    }else{ // –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—è
      if(data.view==='gallery'){
        const price=data.hellPrice??2.00;
        data.groups.forEach(g=>g.images.forEach(src=>{
          const name=prettyLabel(src); if(name.toLowerCase().includes(q)) out.push({name, price, img:src});
        }));
      }else if(data.view==='water2'){
        data.groups.forEach(g=>g.pair.forEach(p=>{ if(p.label.toLowerCase().includes(q)) out.push({name:p.label, price:p.price, img:p.src}); }));
      }else if(Array.isArray(data.groups)){
        data.groups.forEach(g=> (g.items||[]).forEach(p=>{ if((p.name||'').toLowerCase().includes(q)) out.push(p); }));
      }else{ (data.items||[]).forEach(p=>{ if((p.name||'').toLowerCase().includes(q)) out.push(p); }); }
    }
    slideTitle.textContent='–†–µ–∑—É–ª—Ç–∞—Ç–∏'; backBtn.style.display='';
    catalogEl.innerHTML='';
    if(!out.length){ catalogEl.appendChild(el('div',{style:'opacity:.7'},'–ù—è–º–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏.')); return; }
    out.forEach(p=>{
      const card = el('div',{className:'s-card', draggable:true},
        el('img',{src:p.img||'/bbqsaitlogo.jpg', alt:p.name}),
        el('div',{className:'nm'}, p.name),
        el('div',{className:'pr'}, money(p.price||0))
      );
      card.addEventListener('dragstart', e=> e.dataTransfer.setData('application/json', makeDragPayload(p, p.category||'')));
      catalogEl.appendChild(card);
    });
  });
  backBtn?.addEventListener('click', ()=> renderCategories());
  closeSlide?.addEventListener('click', ()=> slide.classList.remove('open'));
  catalogBtn?.addEventListener('click', ()=> isAdmin && openSlide());

  /* ===== Builder (A + B + —Ü–µ–Ω–∞) ===== */
  function productChip(p, onRemove){
    const c = el('div',{className:'chip'},
      el('img',{src:p.image, alt:p.name}),
      el('div',{className:'meta'},
        el('span',{className:'nm'}, p.name),
        el('span',{className:'ds'}, money(p.price))
      ),
      el('span',{className:'x', title:'–ü—Ä–µ–º–∞—Ö–Ω–∏', onclick:()=>{ c.remove(); onRemove && onRemove(); }}, '‚úï')
    );
    c._data=p; return c;
  }
  function makeDropCell(onSet){
    const dz = el('div',{className:'drop'});
    dz.addEventListener('dragover', e=>{ e.preventDefault(); dz.style.borderColor='#ffffff66'; });
    dz.addEventListener('dragleave', ()=> dz.style.borderColor='#ffffff2f');
    dz.addEventListener('drop', e=>{
      e.preventDefault(); dz.style.borderColor='#ffffff2f';
      const raw = e.dataTransfer.getData('application/json'); if(!raw) return;
      try{ const p=JSON.parse(raw); dz.innerHTML=''; dz.appendChild(productChip(p, ()=>{ dz.innerHTML=''; onSet(null); })); onSet(p); }catch(_){}
    });
    return dz;
  }
  function renderRows(){
    rowsWrap.innerHTML='';
    rows.forEach((r, idx)=>{
      const dzA = makeDropCell((p)=> rows[idx].A = p);
      const dzB = makeDropCell((p)=> rows[idx].B = p);
      if(r.A) dzA.appendChild(productChip(r.A, ()=> rows[idx].A=null));
      if(r.B) dzB.appendChild(productChip(r.B, ()=> rows[idx].B=null));
      const price = el('input',{className:'price-input', type:'number', step:'0.01', min:'0', value: r.price ?? ''});
      price.addEventListener('input', ()=> rows[idx].price = Number(price.value||0));
      const row = el('div',{className:'row'},
        dzA, el('div',{className:'pluscell'}, '+'), dzB, price,
        el('button',{className:'row-del', title:'–ò–∑—Ç—Ä–∏–π —Ä–µ–¥', onclick:()=>{ rows.splice(idx,1); renderRows(); }}, '‚úï')
      );
      rowsWrap.appendChild(row);
    });
  }
  function addRow(){ rows.push({A:null,B:null,price:null}); renderRows(); }
  addRowBtn?.addEventListener('click', addRow);

  /* ===== Admin unlock ===== *//* ===== –°—ä—Å—Ç–æ—è–Ω–∏–µ ===== */
let isAdmin = localStorage.getItem('adminLogged') === '1';
function syncAdminUI(){
  builder.style.display    = isAdmin ? 'block' : 'none';
  catalogBtn.style.display = isAdmin ? 'inline-block' : 'none';
  adminBtn.textContent     = isAdmin ? 'Admin (–≤–∫–ª—é—á–µ–Ω)' : 'Admin';
  if (!isAdmin) slide.classList.remove('open');
  toggleDeleteButtons();
}


adminBtn?.addEventListener('click', () => {
  // –∞–∫–æ –≤–µ—á–µ –µ –≤–∫–ª—é—á–µ–Ω ‚Äî –ø—Ä–µ–¥–ª–∞–≥–∞–º–µ –∏–∑–ª–∏–∑–∞–Ω–µ
  if (isAdmin) {
    if (confirm('–ò–∑–∫–ª—é—á–≤–∞–Ω–µ –Ω–∞ –∞–¥–º–∏–Ω —Ä–µ–∂–∏–º?')) {
      isAdmin = false;
      localStorage.removeItem('adminLogged');
      syncAdminUI();
    }
    return;
  }

  // –∏–Ω–∞—á–µ ‚Äî –∏—Å–∫–∞–º–µ –ø–∞—Ä–æ–ª–∞
  const pwd = prompt('–í—ä–≤–µ–¥–∏ –ø–∞—Ä–æ–ª–∞ –∑–∞ –∞–¥–º–∏–Ω:');
  if (pwd === ADMIN_PASS) {
    isAdmin = true;
    localStorage.setItem('adminLogged', '1');
    syncAdminUI();
    if (rows.length === 0) addRow();
    openSlide(); // –ø–æ –∂–µ–ª–∞–Ω–∏–µ: –¥–∏—Ä–µ–∫—Ç–Ω–æ –æ—Ç–≤–∞—Ä—è –∫–∞—Ç–∞–ª–æ–≥–∞
  } else if (pwd !== null) {
    alert('–ì—Ä–µ—à–Ω–∞ –ø–∞—Ä–æ–ª–∞.');
  }
});

syncAdminUI();

 /* ===== –ó–∞–ø–∏—Å / –∏–∑—Ç—Ä–∏–≤–∞–Ω–µ (Firebase) ===== */
const ref = firebase.database().ref('/promotions/items');

saveBtn?.addEventListener('click', async ()=>{
  if(!isAdmin) return alert('–ü—ä—Ä–≤–æ –æ—Ç–∫–ª—é—á–∏ Admin.');
  const toAppend = [];
  for(const r of rows){
    if(!r.A || !r.B || !(r.price>0)) continue;
    const id = genId();
    toAppend.push({
      path:'/promotions/items/'+id,
      data:{
        id,
        parts:[
          {name:r.A.name, desc:r.A.desc||'', price:Number(r.A.price||0), image:r.A.image||'/bbqsaitlogo.jpg'},
          {name:r.B.name, desc:r.B.desc||'', price:Number(r.B.price||0), image:r.B.image||'/bbqsaitlogo.jpg'}
        ],
        price:Number(r.price||0),
        createdAt:Date.now(),
        active:true
      }
    });
  }

  if(!toAppend.length) return alert('–î–æ–±–∞–≤–∏ –ø–æ–Ω–µ –µ–¥–∏–Ω —Ä–µ–¥ —Å A, B –∏ —Ü–µ–Ω–∞.');
  try{
    const updates = {};
    toAppend.forEach(x => {
      updates[x.path] = {
        ...x.data,
        __admin_pass: 'bbqcornera123'   // üëà –¥–æ–±–∞–≤–µ–Ω–æ –ø–æ–ª–µ –∑–∞ RTDB –ø—Ä–∞–≤–∏–ª–æ—Ç–æ
      };
    });
    await firebase.database().ref().update(updates);
    alert('–î–æ–±–∞–≤–µ–Ω–∏: ' + toAppend.length + ' –ø—Ä–æ–º–æ—Ü–∏–∏.');
    rows = []; addRow(); renderRows();
  }catch(e){
    console.error(e);
    alert('–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å: ' + (e.message || e));
  }
}); // üëà –∑–∞—Ç–≤–∞—Ä—è saveBtn click listener-–∞

/* ===== –†–µ–Ω–¥–µ—Ä –Ω–∞ –ø—É–±–ª–∏—á–Ω–∏—è —Å–ø–∏—Å—ä–∫ ===== */
function renderList(dataObj){
  const entries = Object.entries(dataObj || {})
    .filter(([_, p]) => p && p.active !== false && !p.__deleted);

  listEl.innerHTML = entries.length ? entries.map(([key, p]) => {
    const A = p.parts?.[0] || {};
    const B = p.parts?.[1] || {};
    const domId = p.id || key;

    const addBtn = `
      <button type="button"
              class="add-btn promo-add"
              data-id="${domId}"
              title="–î–æ–±–∞–≤–∏ –≤ –∫–æ–ª–∏—á–∫–∞—Ç–∞">+</button>`;

    return `
      <article class="promo-card" role="listitem" data-id="${domId}" data-key="${key}">
        <div class="promo-sides">
          <div>
            <div class="promo-img" style="background-image:url('${A.image || ''}')"></div>
            <div class="promo-name">${safe(A.name || '')}</div>
          </div>
          <div>
            <div class="promo-img" style="background-image:url('${B.image || ''}')"></div>
            <div class="promo-name">${safe(B.name || '')}</div>
          </div>
        </div>
        <div class="promo-price">${money(p.price || 0)}</div>
        ${addBtn}
        <button type="button" class="promo-del" title="–ò–∑—Ç—Ä–∏–π" style="display:${isAdmin ? 'inline-block':'none'}">‚úï</button>
      </article>`;
  }).join('') : `<div style="opacity:.8">–ù—è–º–∞ –∞–∫—Ç–∏–≤–Ω–∏ –ø—Ä–æ–º–æ—Ü–∏–∏.</div>`;

  toggleDeleteButtons();
}

/* ‚úÖ –î–µ–ª–µ–≥–∏—Ä–∞–Ω–æ –î–û–ë–ê–í–Ø–ù–ï ‚Äî —Å–∞–º–æ –µ–¥–∏–Ω —Å–ª—É—à–∞—Ç–µ–ª */
if (!listEl.__boundAdd) {
  listEl.addEventListener('click', (e) => {
    const btn = e.target.closest('.promo-add');
    if (!btn) return;

    const card = btn.closest('.promo-card');
    const pid  = btn.getAttribute('data-id') || card?.dataset.id || card?.dataset.key;

    const snap = window.__lastPromoSnapshot || {};
    let p = snap[pid] || Object.values(snap || {}).find(x => x && (x.id === pid));
    if (!p) return;

    const A = p.parts?.[0] || {};
    const B = p.parts?.[1] || {};
    const price = Number(p.price || 0);
    const name  = `–ü—Ä–æ–º–æ—Ü–∏—è: ${A.name || ''} + ${B.name || ''}`;
    const img   = A.image || B.image || '/bbqsaitlogo.jpg';

    addToCart({
      _id: Date.now()+''+Math.random(),
      name,
      baseName: name,
      price,
      basePrice: price,
      addons: [],
      img
    });

    const prev = btn.textContent;
    btn.textContent = '‚úì';
    setTimeout(()=> btn.textContent = prev, 450);
  });
  listEl.__boundAdd = true;
}

/* üóëÔ∏è –î–µ–ª–µ–≥–∏—Ä–∞–Ω–æ –ò–ó–¢–†–ò–í–ê–ù–ï (—Å–∞–º–æ –∑–∞ Admin) */
if (!listEl.__boundDel) {
  listEl.addEventListener('click', async (e) => {
    const btn = e.target.closest('.promo-del');
    if (!btn) return;
    if (!isAdmin) return alert('–ù—è–º–∞—à –ø—Ä–∞–≤–∞ –∑–∞ –∏–∑—Ç—Ä–∏–≤–∞–Ω–µ.');

    const card = btn.closest('.promo-card');
    const id = card?.dataset.id || card?.dataset.key;
    if (!id) return;

    const pwd = prompt('–í—ä–≤–µ–¥–∏ –∞–¥–º–∏–Ω –ø–∞—Ä–æ–ª–∞—Ç–∞ –∑–∞ –∏–∑—Ç—Ä–∏–≤–∞–Ω–µ:');
    if (pwd !== 'bbqcornera123') {
      alert('‚ùå –ì—Ä–µ—à–Ω–∞ –ø–∞—Ä–æ–ª–∞. –ò–∑—Ç—Ä–∏–≤–∞–Ω–µ—Ç–æ –µ –æ—Ç–∫–∞–∑–∞–Ω–æ.');
      return;
    }
    if (!confirm('–î–∞ –∏–∑—Ç—Ä–∏—è –ª–∏ —Ç–∞–∑–∏ –ø—Ä–æ–º–æ—Ü–∏—è –∑–∞–≤–∏–Ω–∞–≥–∏?')) return;

    try {
      await firebase.database().ref('/promotions/items/' + id).update({
        __deleted: true,
        active: false,
        updatedAt: Date.now(),
        __admin_pass: 'bbqcornera123'
      });
      alert('‚úÖ –ü—Ä–æ–º–æ—Ü–∏—è—Ç–∞ –µ –∏–∑—Ç—Ä–∏—Ç–∞.');
    } catch (e2) {
      console.error(e2);
      alert('‚ö†Ô∏è –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–∑—Ç—Ä–∏–≤–∞–Ω–µ: ' + (e2.message || e2));
    }
  });
  listEl.__boundDel = true;
}

/* Live sync –æ—Ç RTDB */
ref.on('value', snap=>{
  const data = snap.val() || {};
  window.__lastPromoSnapshot = data;
  renderList(data);
});

// –ê–∫–æ —Ç—ä–∫–º–æ —Å–º–µ –æ—Ç–∫–ª—é—á–∏–ª–∏ –∞–¥–º–∏–Ω ‚Äì –¥–∞ –∏–º–∞ –ø–æ–Ω–µ –µ–¥–∏–Ω —Ä–µ–¥
if(isAdmin && rows.length===0) addRow();
}; // ‚üµ –∫—Ä–∞–π –Ω–∞ window.initPromotionsInline

// –∞–∫–æ ‚Äû–ü—Ä–æ–º–æ—Ü–∏–∏‚Äú –µ –±–∏–ª–∞ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–∞ –ø—Ä–µ–¥–∏ –º–æ–¥—É–ª—ä—Ç –¥–∞ —Å–µ –∑–∞—Ä–µ–¥–∏ ‚Äî —Å—Ç–∞—Ä—Ç–∏—Ä–∞–π —Å–µ–≥–∞
if (window.__needPromoInit) {
  window.initPromotionsInline();
  window.__needPromoInit = false;
}


// –ø—É—Å–∫–∞–º–µ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ/resize
addEventListener('load',  ensureMobilePlusRight);
addEventListener('resize', ensureMobilePlusRight);

// –∏ –ø—Ä–∏ –≤—Å—è–∫–∞ —Å–º—è–Ω–∞ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è (–¥–∏–Ω–∞–º–∏—á–Ω–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ)
new MutationObserver(()=>ensureMobilePlusRight())
  .observe(document.getElementById('productGrid'), {childList:true, subtree:true});

// –ø—É—Å–∫–∞–º–µ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ/resize
addEventListener('load',  ensureMobilePlusRight);
addEventListener('resize', ensureMobilePlusRight);

// –∏ –ø—Ä–∏ –≤—Å—è–∫–∞ —Å–º—è–Ω–∞ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è (–¥–∏–Ω–∞–º–∏—á–Ω–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ)
new MutationObserver(()=>ensureMobilePlusRight())
  .observe(document.getElementById('productGrid'), {childList:true, subtree:true});

// === –ì–õ–û–ë–ê–õ–ï–ù –¢–†–ê–ö–ï–† –ù–ê –ö–õ–ò–ö–û–í–ï –ó–ê –ê–î–ú–ò–ù–ò ===
(function(){
  const who = (localStorage.getItem('adminName') || '').trim();
  if(!who) return;

  function logAction(text){
    const k = `logs_${who}`;
    const now = new Date();
    const entry = `${now.toLocaleString()} ‚Äî ${who} ${text}`;
    const arr = JSON.parse(localStorage.getItem(k) || '[]');
    arr.unshift(entry);
    localStorage.setItem(k, JSON.stringify(arr));

    const known = new Set(JSON.parse(localStorage.getItem('logs__admins')||'[]'));
    known.add(who);
    localStorage.setItem('logs__admins', JSON.stringify([...known]));
  }

  document.addEventListener('click', e=>{
    let desc = '';
    if(e.target.closest('button, a, input, select')){
      const el = e.target.closest('button, a, input, select');
      const tag = el.tagName.toLowerCase();
      const label = el.innerText || el.value || el.id || '(–±–µ–∑ —Ç–µ–∫—Å—Ç)';
      desc = `–∫–ª–∏–∫–Ω–∞ –≤—ä—Ä—Ö—É ${tag} ‚Üí "${label.trim().slice(0,60)}"`;
    } else {
      desc = `–∫–ª–∏–∫–Ω–∞ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–ª–Ω–æ –º—è—Å—Ç–æ (${e.clientX}x${e.clientY})`;
    }
    const page = location.pathname.split('/').pop() || '–Ω–µ–ø–æ–∑–Ω–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞';
    logAction(`${desc} [${page}]`);
  });

  logAction(`–≤–ª–µ–∑–µ –≤ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ (${location.pathname.split('/').pop()})`);
})();


</script>

</body>
</html>